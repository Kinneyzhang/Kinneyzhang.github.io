<!DOCTYPE html>
<html lang="zh-CN"><head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <meta name="description" content="Meteor React æ–‡æ¡£ - https://geekinney.com/post/meteor-react-docs/">
    
    <meta name="msvalidate.01" content="B46311949B856F2A7015F366FB3CE878" />
    <title>Meteor React æ–‡æ¡£</title>
    <link rel="icon" type="image/png" href="/favicon.ico">
    
    <link rel="stylesheet" href="https://geekinney.com/style.min.2bd56458aa287d2080f96e7dbe9a0a5a26417b71557dcb5456ee710e21c940d1.css">
    
    <script type="text/javascript" src="/main.js" defer></script>
    
</head>
<body class="active-animate ">
        <div id="header"><div class="container-header">
    <div id="vars" class="container-vars" style="display: none;">
	{
		"hasFoldAllCodeBlocks": false,
		"svgColor": "#6c757d",
		"en": false,
		"dark": false
	}
</div>
    <h1 class="title">
        
            Meteor React æ–‡æ¡£
            
        
    </h1>

    <div class="container-breadcrumb-nav">
    
    <div class="breadcrumb-nav-bar">
        <div><a href="/"><svg t="1656411084410" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2954" width="16" height="16"><path d="M947.5 390.6l-377-290c-34.5-26.5-82.6-26.5-117.1 0l-377 290c-14 10.8-16.6 30.9-5.9 44.9 10.8 14 30.9 16.6 44.9 5.9l28.5-21.9V768c0 88.2 71.8 160 160 160h80c35.3 0 64-28.7 64-64V640c0-17.6 14.4-32 32-32h64c17.6 0 32 14.4 32 32v224c0 35.3 28.7 64 64 64h80c88.2 0 160-71.8 160-160V419.4l28.5 21.9c5.8 4.5 12.7 6.6 19.5 6.6 9.6 0 19.1-4.3 25.4-12.5 10.8-13.9 8.2-34-5.8-44.8zM816 768c0 52.9-43.1 96-96 96h-80V640c0-52.9-43.1-96-96-96h-64c-52.9 0-96 43.1-96 96v224h-80c-52.9 0-96-43.1-96-96V370.2l284.5-218.8c11.5-8.8 27.5-8.8 39 0L816 370.2V768z" fill=#6c757d p-id="2955"></path></svg></a></div>
        <div><a href="/nav"><svg t="1656411531924" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5827" width="16" height="16"><path d="M849.59197473 125.23018519L139.22930586 391.72854662a23.35052669 23.35052669 0 0 0-14.95414244 21.65490745c-0.12257519 9.70384955 5.61801843 18.46795771 14.40255493 22.04306141l318.42928099 129.25528056 119.51057092 320.39047893c3.06437293 8.23295069 10.35758221 13.89182751 18.7335381 14.87242563l2.7170774 0.14300521a22.79893918 22.79893918 0 0 0 21.20546682-15.36272638l259.51158924-729.54564933a23.8612558 23.8612558 0 0 0-5.31158128-24.55584682 22.3290685 22.3290685 0 0 0-23.9021142-5.43415649zM793.65694081 211.64552314l-196.63064161 552.75171747-91.91077952-246.37564122-253.62799211-102.96295445 542.16941324-203.4131218z" p-id="5828" fill=#6c757d></path></svg></a></div>
        <div><a href="/search"><svg t="1656411627509" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1730" width="14" height="14"><path d="M469.333333 85.333333c211.968 0 384 172.032 384 384s-172.032 384-384 384-384-172.032-384-384 172.032-384 384-384z m0 682.666667c164.992 0 298.666667-133.674667 298.666667-298.666667 0-165.034667-133.674667-298.666667-298.666667-298.666666-165.034667 0-298.666667 133.632-298.666666 298.666666 0 164.992 133.632 298.666667 298.666666 298.666667z m362.026667 3.029333l120.704 120.661334-60.373333 60.373333-120.661334-120.704 60.330667-60.330667z" p-id="1731" fill=#6c757d></path></svg></a></div>
        <div><a href="/posts"><svg t="1656411724198" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5655" width="12" height="12"><path d="M811.705761 1024H212.294239c-93.1199 0-174.823046-87.570975-174.823046-187.387854V162.322018C37.471193 69.776145 112.604921 0 212.294239 0H596.190595l7.015883 5.93161c111.74388 95.479788 185.857116 170.741078 279.614824 266.093304 29.65805 30.040735 61.165743 62.122454 96.436499 97.393211l7.271006 7.334787v459.859234c-0.063781 99.816879-81.703145 187.387854-174.823046 187.387854zM212.294239 49.94033c-72.391155 0-124.882716 47.261538-124.882716 112.381688v674.290128c0 71.94469 59.507443 137.383743 124.882716 137.383743h599.411522c65.311492 0 124.882716-65.439053 124.882716-137.383743V397.417876c-32.528184-32.464404-61.73977-62.250016-89.356836-90.377328-90.951355-92.418312-163.278729-165.957521-269.601245-257.163999H212.294239z" fill=#6c757d p-id="5656"></path><path d="M936.588477 449.526752h-212.326129c-99.753099 0-187.324073-81.703145-187.324073-174.823046V49.94033a25.002055 25.002055 0 0 1 49.94033 0v224.763376c0 65.311492 65.502834 124.882716 137.383743 124.882716h212.326129a25.002055 25.002055 0 1 1 0 49.94033z" fill=#6c757d p-id="5657"></path></svg></a></div>
        <div><a href="/archive"><svg t="1656411795742" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7334" width="12" height="12"><path d="M884.224 522.24H504.32V141.824c0-16.896-13.824-30.72-30.72-30.72-120.32 0-233.472 47.616-317.952 134.144S26.112 445.952 29.184 566.784c2.56 114.688 49.152 222.72 131.072 304.128 81.92 81.408 189.952 128 304.64 130.56h10.24c117.76 0 227.84-45.568 312.32-128.512 86.528-85.504 133.632-199.68 132.608-321.024-0.512-2.048-1.536-29.696-35.84-29.696z m-140.288 307.712c-74.752 73.728-173.056 112.64-277.504 110.592-205.824-4.608-370.688-169.472-375.296-374.784-3.072-104.448 35.84-202.752 108.544-277.504 65.536-67.072 151.552-107.52 243.712-114.688v378.88c0 16.896 13.824 30.72 30.72 30.72 129.024 0 311.296 0 382.976 0.512-6.144 93.184-46.08 179.712-113.152 246.272z" fill=#6c757d p-id="7335"></path><path d="M603.136 11.264c-8.192-0.512-15.872 3.072-22.016 8.704-5.632 5.632-9.216 13.824-9.216 22.016v378.88c0 16.896 13.824 30.72 30.72 30.72h378.88c16.896 0 30.72-13.824 30.72-30.72 0-223.744-183.808-407.552-409.088-409.6z m30.208 378.88V74.24c167.424 16.384 301.056 150.016 315.904 315.904h-315.904z" fill=#6c757d p-id="7336"></path></svg></a></div>
        <div id="light-dark" style="cursor: pointer;"><a><svg t="1656411842215" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5086" width="12" height="12"><path d="M1007.492874 384.513055c-8.795694-34.58307-21.189627-67.666874-36.682043-99.05151-2.698679-5.397358-10.894667-3.498287-10.894666 2.598728v0.299853c0 32.484098-6.896624 63.868734-19.890263 92.554691-10.694764 23.488501-25.487523 45.077933-43.978471 64.068635-41.779547 42.679107-99.05151 66.967217-158.722299 67.26707-61.869712 0.299853-119.941284-24.188159-162.920244-68.966238-40.280281-41.979449-62.56937-98.251902-62.269516-156.323473 0.399804-59.270984 23.588452-114.94373 65.567901-156.823229 19.59041-19.59041 42.179351-35.082826 66.667364-46.077443C672.956643 71.166451 704.041426 64.469729 736.125719 64.469729h1.299364c6.097015 0 8.096037-8.096037 2.598728-10.794715C708.739126 37.982696 675.655322 25.488812 641.172203 16.493216 599.492607 5.598549 555.714038-0.098662 510.536154 0.001289 222.37722 0.700947-7.41029 237.38508 0.185992 525.444064c7.096526 271.667008 225.889418 490.559851 497.456474 497.856279 287.559228 7.796183 524.14341-220.891864 525.842579-508.551044 0.299853-44.977981-5.297407-88.656599-15.992171-130.236244z m-83.15929 301.552378c-22.588942 53.27392-54.873137 101.250434-95.953027 142.330323-41.179841 41.179841-89.056403 73.464036-142.330324 95.953027-55.172991 23.288599-113.744317 35.182777-174.314666 35.182777s-119.141675-11.794226-174.314666-35.182777c-53.27392-22.588942-101.250434-54.873137-142.330323-95.953027-41.179841-41.179841-73.464036-89.056403-95.953027-142.330323C75.749001 630.892442 63.954774 572.221164 63.954774 511.750767s11.794226-119.141675 35.182777-174.314666c22.588942-53.27392 54.873137-101.250434 95.953027-142.330323 41.179841-41.179841 89.056403-73.464036 142.330323-95.953027C392.593892 75.7642 451.26517 63.969974 511.735567 63.969974c13.99315 0 27.886348 0.599706 41.679596 1.89907C489.246577 118.643209 448.266638 198.704016 448.266638 288.360126c0 159.022152 128.836929 287.859081 287.859081 287.859081 89.156354 0 168.817357-40.580134 221.691473-104.149015 1.099462 13.09359 1.699168 26.387082 1.699168 39.680575 0 60.470397-11.794226 119.141675-35.182776 174.314666z" p-id="5087" fill=#6c757d></path></svg></a></div>
        
    </div>

    
</div>

            <div id="toc">ğŸ“œ</div>
        
    
    
</div>
</div>
        <div id="content">












<div class="container-main 
     container-page 
">

    <div class="desc">
        
        <span>
            
            <svg t="1656736000388" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="7409" width="12" height="12"><path d="M524.885333 338.986667L200.362667 663.466667c-17.28 15.274667-27.989333 36.693333-29.696 56.234666v133.76l130.730666 0.085334c22.784-1.621333 43.989333-12.245333 61.013334-31.701334l322.688-322.645333-160.213334-160.213333z m60.373334-60.330667l160.170666 160.213333 102.144-102.144a19.712 19.712 0 0 0 0-27.861333L715.093333 176.426667a19.456 19.456 0 0 0-27.605333 0L585.258667 278.613333zM701.312 85.333333c27.946667 0 54.741333 11.136 74.282667 30.848l132.309333 132.309334a105.045333 105.045333 0 0 1 0 148.565333L424.874667 879.957333c-29.824 34.346667-72.106667 55.466667-120.448 58.794667H85.333333v-42.666667l0.128-179.84c3.626667-44.970667 24.576-86.826667 56.448-114.944l485.12-485.034666A104.789333 104.789333 0 0 1 701.269333 85.333333z" p-id="7410" fill="#adb5bd"></path></svg>
            2021-10-15&nbsp;
        </span>
        <span>
            
            <svg t="1656737270708" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="23838" width="11" height="11"><path d="M824.264 95.36c0-23.859 25.043-44.16 48.902-44.16s49.714 20.301 49.714 44.16v190.08c0 23.859-19.054 52.868-42.913 52.868h-190.08c-23.859 0-46.696-25.96-46.696-49.819s22.55-46.249 46.409-46.249h82.025C702.344 175.534 610.22 155.853 512 155.853c-206.775 0-360.398 149.372-360.398 356.147 0 206.775 153.623 358.23 360.398 358.23 206.775 0 357.467-151.455 357.467-358.23 0-23.859 23.634-50.706 53.413-50.706 29.78 0 49.92 26.847 49.92 50.706 0 254.493-206.307 460.8-460.8 460.8-254.493 0-460.8-206.307-460.8-460.8C51.2 257.507 257.507 51.2 512 51.2c122.4 0 226.684 33.296 312.264 117.369 0.358 0.351 0.358-24.052 0-73.209z" p-id="23839" fill="#adb5bd"></path></svg>
            2022-10-13&nbsp;&nbsp;&nbsp;
        </span>
        <span>
            
            <svg t="1656737548689" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="33866" width="12" height="12"><path d="M832.038608 64.662657H192.030028C121.255125 64.662657 63.940169 121.98845 63.940169 192.694717v446.793671C63.940169 710.205493 121.255125 767.643272 192.030028 767.643272h133.353183a63.940169 63.940169 0 0 1 55.219742 31.576328l76.099638 129.83828c12.358154 21.093031 33.790754 31.626903 55.216129 31.626903s42.832688-10.544709 55.198067-31.619678l76.222461-129.870792a63.940169 63.940169 0 0 1 55.212517-31.551041h133.54103c70.576219 0 127.732228-57.289669 127.732227-127.800865V192.391272C959.825022 121.85479 902.643727 64.662657 832.038608 64.662657zM895.884854 639.842407A63.85347 63.85347 0 0 1 832.092795 703.703103h-133.54103a127.753903 127.753903 0 0 0-110.349172 63.09847l-76.222461 129.856342a0.274545 0.274545 0 0 1 0-0.050574h-0.032512s-0.021675 0.061411-0.032512 0.061412l-76.1466-129.85273A127.804477 127.804477 0 0 0 325.383211 703.703103H192.030028A64.207489 64.207489 0 0 1 127.880338 639.488388V192.694717A64.102729 64.102729 0 0 1 192.030028 128.602826h640.00858A63.799284 63.799284 0 0 1 895.884854 192.391272v447.451135z" fill="#adb5bd" p-id="33867"></path><path d="M608.154093 288.092004A31.970084 31.970084 0 0 0 576.184009 320.062089v160.078006l-134.650049-179.278119A31.970084 31.970084 0 0 0 384.002258 320.062089v255.760676a31.970084 31.970084 0 0 0 63.940169 0v-159.958796l134.650048 179.274507a31.970084 31.970084 0 0 0 57.531703-19.200113V320.062089a31.970084 31.970084 0 0 0-31.970085-31.970085z" fill="#adb5bd" p-id="33868"></path></svg>
            16126 å­—</span>&nbsp;
        <span>
            
            <svg t="1656737462334" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="32892" width="12" height="12"><path d="M512 74.666667C270.933333 74.666667 74.666667 270.933333 74.666667 512S270.933333 949.333333 512 949.333333 949.333333 753.066667 949.333333 512 753.066667 74.666667 512 74.666667z m0 810.666666c-204.8 0-373.333333-168.533333-373.333333-373.333333S307.2 138.666667 512 138.666667 885.333333 307.2 885.333333 512 716.8 885.333333 512 885.333333z" p-id="32893" fill="#adb5bd"></path><path d="M695.466667 567.466667l-151.466667-70.4V277.333333c0-17.066667-14.933333-32-32-32s-32 14.933333-32 32v238.933334c0 12.8 6.4 23.466667 19.2 29.866666l170.666667 81.066667c4.266667 2.133333 8.533333 2.133333 12.8 2.133333 12.8 0 23.466667-6.4 29.866666-19.2 6.4-14.933333 0-34.133333-17.066666-42.666666z" p-id="32894" fill="#adb5bd"></path></svg>
            33 åˆ†é’Ÿ</span><div class="container-ctgtag">
	<div class="taxonomy">
		
		<div class="ctg">
			
			
			<a href="/categories/%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3">æŠ€æœ¯æ–‡æ¡£</a>
			
		</div>
		<div class="tag">
			
			 - 
			
			<a href="/tags/meteor">Meteor</a>
			
			<a href="/tags/react">React</a>
			
			<a href="/tags/%E7%BF%BB%E8%AF%91">ç¿»è¯‘</a>
			
		</div>
	</div>
</div>
    </div>
    
    <div class="toc">
        
        <div class="page-operation">
            <div><a href="#"><img src="/imgs/icons/arrow-up-circle.svg" alt=""></a></div>
            <div><a href="https://geekinney.com/post/meteor-guide/"><img src="/imgs/icons/arrow-left-circle.svg" alt=""></a></div>
            <div><a href="https://geekinney.com/post/my-view-of-reading/"><img src="/imgs/icons/arrow-right-circle.svg" alt=""></a></div>
        </div>
        
        <nav id="TableOfContents">
  <ul>
    <li><a href="#11-å®‰è£…-meteor">1.1 å®‰è£… Meteor</a></li>
    <li><a href="#12-åˆ›å»º-meteor-é¡¹ç›®">1.2 åˆ›å»º Meteor é¡¹ç›®</a></li>
    <li><a href="#13-åˆ›å»ºä»»åŠ¡ç»„ä»¶">1.3 åˆ›å»ºä»»åŠ¡ç»„ä»¶</a></li>
    <li><a href="#14-åˆ›å»ºä»»åŠ¡ç¤ºä¾‹">1.4 åˆ›å»ºä»»åŠ¡ç¤ºä¾‹</a></li>
    <li><a href="#15-æ¸²æŸ“ä»»åŠ¡ç¤ºä¾‹">1.5 æ¸²æŸ“ä»»åŠ¡ç¤ºä¾‹</a></li>
    <li><a href="#16-ç§»åŠ¨ç«¯å¤–è§‚">1.6 ç§»åŠ¨ç«¯å¤–è§‚</a></li>
    <li><a href="#17-æ›´æ¢çƒ­æ¨¡å—">1.7 æ›´æ¢çƒ­æ¨¡å—</a></li>
  </ul>

  <ul>
    <li><a href="#21-åˆ›å»ºä»»åŠ¡é›†åˆ">2.1 åˆ›å»ºä»»åŠ¡é›†åˆ</a></li>
    <li><a href="#22-åˆå§‹åŒ–ä»»åŠ¡é›†">2.2 åˆå§‹åŒ–ä»»åŠ¡é›†</a></li>
    <li><a href="#23-æ¸²æŸ“ä»»åŠ¡é›†åˆ">2.3 æ¸²æŸ“ä»»åŠ¡é›†åˆ</a></li>
  </ul>

  <ul>
    <li><a href="#31-åˆ›å»ºä»»åŠ¡è¡¨å•">3.1 åˆ›å»ºä»»åŠ¡è¡¨å•</a></li>
    <li><a href="#32-æ›´æ–°appç»„ä»¶">3.2 æ›´æ–°Appç»„ä»¶</a></li>
    <li><a href="#33-æ›´æ–°æ ·å¼è¡¨">3.3 æ›´æ–°æ ·å¼è¡¨</a></li>
    <li><a href="#34-æ·»åŠ æäº¤å¤„ç†ç¨‹åº">3.4 æ·»åŠ æäº¤å¤„ç†ç¨‹åº</a></li>
    <li><a href="#35-é¦–å…ˆæ˜¾ç¤ºæœ€æ–°çš„ä»»åŠ¡">3.5 é¦–å…ˆæ˜¾ç¤ºæœ€æ–°çš„ä»»åŠ¡</a></li>
  </ul>

  <ul>
    <li><a href="#41-æ·»åŠ å¤é€‰æ¡†">4.1 æ·»åŠ å¤é€‰æ¡†</a></li>
    <li><a href="#42-åˆ‡æ¢å¤é€‰æ¡†">4.2 åˆ‡æ¢å¤é€‰æ¡†</a></li>
    <li><a href="#43-åˆ é™¤ä»»åŠ¡">4.3 åˆ é™¤ä»»åŠ¡</a></li>
  </ul>

  <ul>
    <li><a href="#51-css">5.1 CSS</a></li>
    <li><a href="#52-åº”ç”¨æ ·å¼">5.2 åº”ç”¨æ ·å¼</a></li>
  </ul>

  <ul>
    <li><a href="#61-usestate">6.1 useState</a></li>
    <li><a href="#62-æŒ‰é’®æ ·å¼">6.2 æŒ‰é’®æ ·å¼</a></li>
    <li><a href="#63-è¿‡æ»¤ä»»åŠ¡">6.3 è¿‡æ»¤ä»»åŠ¡</a></li>
    <li><a href="#64-meteorå¼€å‘å·¥å…·æ’ä»¶">6.4 Meteorå¼€å‘å·¥å…·æ’ä»¶</a></li>
    <li><a href="#65-å¾…åŠä»»åŠ¡">6.5 å¾…åŠä»»åŠ¡</a></li>
  </ul>

  <ul>
    <li><a href="#71-å¯†ç è®¤è¯">7.1 å¯†ç è®¤è¯</a></li>
    <li><a href="#72-åˆ›å»ºç”¨æˆ·è´¦æˆ·">7.2 åˆ›å»ºç”¨æˆ·è´¦æˆ·</a></li>
    <li><a href="#73-ç™»å½•è¡¨å•">7.3 ç™»å½•è¡¨å•</a></li>
    <li><a href="#74-è¦æ±‚è®¤è¯">7.4 è¦æ±‚è®¤è¯</a></li>
    <li><a href="#75-ç™»å½•è¡¨å•æ ·å¼">7.5 ç™»å½•è¡¨å•æ ·å¼</a></li>
    <li><a href="#76-æœåŠ¡å™¨å¯åŠ¨">7.6 æœåŠ¡å™¨å¯åŠ¨</a></li>
    <li><a href="#77-ä»»åŠ¡æ‰€æœ‰è€…">7.7 ä»»åŠ¡æ‰€æœ‰è€…</a></li>
    <li><a href="#78-é€€å‡ºç™»å½•">7.8 é€€å‡ºç™»å½•</a></li>
  </ul>

  <ul>
    <li><a href="#81-ç¦ç”¨å¿«é€ŸåŸå‹æŠ€æœ¯">8.1 ç¦ç”¨å¿«é€ŸåŸå‹æŠ€æœ¯</a></li>
    <li><a href="#82-æ·»åŠ ä»»åŠ¡æ–¹æ³•">8.2 æ·»åŠ ä»»åŠ¡æ–¹æ³•</a></li>
    <li><a href="#83-å®ç°æ–¹æ³•è°ƒç”¨">8.3 å®ç°æ–¹æ³•è°ƒç”¨</a></li>
    <li><a href="#84-apiå’Œdbæ–‡ä»¶å¤¹">8.4 apiå’Œdbæ–‡ä»¶å¤¹</a></li>
  </ul>

  <ul>
    <li><a href="#91-è‡ªåŠ¨å‘å¸ƒ">9.1 è‡ªåŠ¨å‘å¸ƒ</a></li>
    <li><a href="#92-ä»»åŠ¡å‘å¸ƒ">9.2 ä»»åŠ¡å‘å¸ƒ</a></li>
    <li><a href="#93-ä»»åŠ¡è®¢é˜…">9.3 ä»»åŠ¡è®¢é˜…</a></li>
    <li><a href="#94-åŠ è½½çŠ¶æ€">9.4 åŠ è½½çŠ¶æ€</a></li>
    <li><a href="#95-æ£€æŸ¥ç”¨æˆ·æƒé™">9.5 æ£€æŸ¥ç”¨æˆ·æƒé™</a></li>
  </ul>

  <ul>
    <li><a href="#101-ios-æ¨¡æ‹Ÿå™¨">10.1 iOS æ¨¡æ‹Ÿå™¨</a></li>
    <li><a href="#102-å®‰å“æ¨¡æ‹Ÿå™¨">10.2 å®‰å“æ¨¡æ‹Ÿå™¨</a></li>
    <li><a href="#103-å®‰å“è®¾å¤‡">10.3 å®‰å“è®¾å¤‡</a></li>
    <li><a href="#104-iphone-or-ipad">10.4 iPhone or iPad</a></li>
  </ul>

  <ul>
    <li><a href="#111-å®‰è£…ä¾èµ–">11.1 å®‰è£…ä¾èµ–</a></li>
    <li><a href="#112-è„šæ‰‹æ¶æµ‹è¯•">11.2 è„šæ‰‹æ¶æµ‹è¯•</a></li>
    <li><a href="#113-æ•°æ®å‡†å¤‡">11.3 æ•°æ®å‡†å¤‡</a></li>
    <li><a href="#114-æµ‹è¯•ä»»åŠ¡åˆ é™¤">11.4 æµ‹è¯•ä»»åŠ¡åˆ é™¤</a></li>
    <li><a href="#115-æ›´å¤šçš„æµ‹è¯•">11.5 æ›´å¤šçš„æµ‹è¯•</a></li>
  </ul>

  <ul>
    <li><a href="#121-åˆ›å»ºè´¦å·">12.1 åˆ›å»ºè´¦å·</a></li>
    <li><a href="#122-éƒ¨ç½²åº”ç”¨">12.2 éƒ¨ç½²åº”ç”¨</a></li>
    <li><a href="#123-è®¿é—®å¹¶äº«å—å§">12.3 è®¿é—®å¹¶äº«å—å§</a></li>
  </ul>
</nav>
    </div>

    <div class='content  content '>
        <!-- markdown-toc start - Don't edit this section. Run M-x markdown-toc-refresh-toc -->
<p style="text-align:center;font-size:1.3em">æ–‡æ¡£ç›®å½•ç»“æ„</p>
<ul>
<li><a href="#1-%E5%88%9B%E5%BB%BAapp">1 åˆ›å»ºapp</a>
<ul>
<li><a href="#11-%E5%AE%89%E8%A3%85-meteor">1.1 å®‰è£… Meteor</a></li>
<li><a href="#12-%E5%88%9B%E5%BB%BA-meteor-%E9%A1%B9%E7%9B%AE">1.2 åˆ›å»º Meteor é¡¹ç›®</a></li>
<li><a href="#13-%E5%88%9B%E5%BB%BA%E4%BB%BB%E5%8A%A1%E7%BB%84%E4%BB%B6">1.3 åˆ›å»ºä»»åŠ¡ç»„ä»¶</a></li>
<li><a href="#14-%E5%88%9B%E5%BB%BA%E4%BB%BB%E5%8A%A1%E7%A4%BA%E4%BE%8B">1.4 åˆ›å»ºä»»åŠ¡ç¤ºä¾‹</a></li>
<li><a href="#15-%E6%B8%B2%E6%9F%93%E4%BB%BB%E5%8A%A1%E7%A4%BA%E4%BE%8B">1.5 æ¸²æŸ“ä»»åŠ¡ç¤ºä¾‹</a></li>
<li><a href="#16-%E7%A7%BB%E5%8A%A8%E7%AB%AF%E5%A4%96%E8%A7%82">1.6 ç§»åŠ¨ç«¯å¤–è§‚</a></li>
<li><a href="#17-%E6%9B%B4%E6%8D%A2%E7%83%AD%E6%A8%A1%E5%9D%97">1.7 æ›´æ¢çƒ­æ¨¡å—</a></li>
</ul>
</li>
<li><a href="#2-%E9%9B%86%E5%90%88">2 é›†åˆ</a>
<ul>
<li><a href="#21-%E5%88%9B%E5%BB%BA%E4%BB%BB%E5%8A%A1%E9%9B%86%E5%90%88">2.1 åˆ›å»ºä»»åŠ¡é›†åˆ</a></li>
<li><a href="#22-%E5%88%9D%E5%A7%8B%E5%8C%96%E4%BB%BB%E5%8A%A1%E9%9B%86">2.2 åˆå§‹åŒ–ä»»åŠ¡é›†</a></li>
<li><a href="#23-%E6%B8%B2%E6%9F%93%E4%BB%BB%E5%8A%A1%E9%9B%86%E5%90%88">2.3 æ¸²æŸ“ä»»åŠ¡é›†åˆ</a></li>
</ul>
</li>
<li><a href="#3-%E8%A1%A8%E5%8D%95%E5%92%8C%E4%BA%8B%E4%BB%B6">3 è¡¨å•å’Œäº‹ä»¶</a>
<ul>
<li><a href="#31-%E5%88%9B%E5%BB%BA%E4%BB%BB%E5%8A%A1%E8%A1%A8%E5%8D%95">3.1 åˆ›å»ºä»»åŠ¡è¡¨å•</a></li>
<li><a href="#32-%E6%9B%B4%E6%96%B0app%E7%BB%84%E4%BB%B6">3.2 æ›´æ–°Appç»„ä»¶</a></li>
<li><a href="#33-%E6%9B%B4%E6%96%B0%E6%A0%B7%E5%BC%8F%E8%A1%A8">3.3 æ›´æ–°æ ·å¼è¡¨</a></li>
<li><a href="#34-%E6%B7%BB%E5%8A%A0%E6%8F%90%E4%BA%A4%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F">3.4 æ·»åŠ æäº¤å¤„ç†ç¨‹åº</a></li>
<li><a href="#35-%E9%A6%96%E5%85%88%E6%98%BE%E7%A4%BA%E6%9C%80%E6%96%B0%E7%9A%84%E4%BB%BB%E5%8A%A1">3.5 é¦–å…ˆæ˜¾ç¤ºæœ€æ–°çš„ä»»åŠ¡</a></li>
</ul>
</li>
<li><a href="#4-%E6%9B%B4%E6%96%B0%E5%92%8C%E5%88%A0%E9%99%A4">4 æ›´æ–°å’Œåˆ é™¤</a>
<ul>
<li><a href="#41-%E6%B7%BB%E5%8A%A0%E5%A4%8D%E9%80%89%E6%A1%86">4.1 æ·»åŠ å¤é€‰æ¡†</a></li>
<li><a href="#42-%E5%88%87%E6%8D%A2%E5%A4%8D%E9%80%89%E6%A1%86">4.2 åˆ‡æ¢å¤é€‰æ¡†</a></li>
<li><a href="#43-%E5%88%A0%E9%99%A4%E4%BB%BB%E5%8A%A1">4.3 åˆ é™¤ä»»åŠ¡</a></li>
</ul>
</li>
<li><a href="#5-%E6%A0%B7%E5%BC%8F">5 æ ·å¼</a>
<ul>
<li><a href="#51-css">5.1 CSS</a></li>
<li><a href="#52-%E5%BA%94%E7%94%A8%E6%A0%B7%E5%BC%8F">5.2 åº”ç”¨æ ·å¼</a></li>
</ul>
</li>
<li><a href="#6-%E7%AD%9B%E9%80%89%E4%BB%BB%E5%8A%A1">6 ç­›é€‰ä»»åŠ¡</a>
<ul>
<li><a href="#61-usestate">6.1 useState</a></li>
<li><a href="#62-%E6%8C%89%E9%92%AE%E6%A0%B7%E5%BC%8F">6.2 æŒ‰é’®æ ·å¼</a></li>
<li><a href="#63-%E8%BF%87%E6%BB%A4%E4%BB%BB%E5%8A%A1">6.3 è¿‡æ»¤ä»»åŠ¡</a></li>
<li><a href="#64-meteor%E5%BC%80%E5%8F%91%E5%B7%A5%E5%85%B7%E6%8F%92%E4%BB%B6">6.4 Meteorå¼€å‘å·¥å…·æ’ä»¶</a></li>
<li><a href="#65-%E5%BE%85%E5%8A%9E%E4%BB%BB%E5%8A%A1">6.5 å¾…åŠä»»åŠ¡</a></li>
</ul>
</li>
<li><a href="#7-%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%E8%B4%A6%E6%88%B7">7 æ·»åŠ ç”¨æˆ·è´¦æˆ·</a>
<ul>
<li><a href="#71-%E5%AF%86%E7%A0%81%E8%AE%A4%E8%AF%81">7.1 å¯†ç è®¤è¯</a></li>
<li><a href="#72-%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E8%B4%A6%E6%88%B7">7.2 åˆ›å»ºç”¨æˆ·è´¦æˆ·</a></li>
<li><a href="#73-%E7%99%BB%E5%BD%95%E8%A1%A8%E5%8D%95">7.3 ç™»å½•è¡¨å•</a></li>
<li><a href="#74-%E8%A6%81%E6%B1%82%E8%AE%A4%E8%AF%81">7.4 è¦æ±‚è®¤è¯</a></li>
<li><a href="#75-%E7%99%BB%E5%BD%95%E8%A1%A8%E5%8D%95%E6%A0%B7%E5%BC%8F">7.5 ç™»å½•è¡¨å•æ ·å¼</a></li>
<li><a href="#76-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%AF%E5%8A%A8">7.6 æœåŠ¡å™¨å¯åŠ¨</a></li>
<li><a href="#77-%E4%BB%BB%E5%8A%A1%E6%89%80%E6%9C%89%E8%80%85">7.7 ä»»åŠ¡æ‰€æœ‰è€…</a></li>
<li><a href="#78-%E9%80%80%E5%87%BA%E7%99%BB%E5%BD%95">7.8 é€€å‡ºç™»å½•</a></li>
</ul>
</li>
<li><a href="#8-%E6%96%B9%E6%B3%95">8 æ–¹æ³•</a>
<ul>
<li><a href="#81-%E7%A6%81%E7%94%A8%E5%BF%AB%E9%80%9F%E5%8E%9F%E5%9E%8B%E6%8A%80%E6%9C%AF">8.1 ç¦ç”¨å¿«é€ŸåŸå‹æŠ€æœ¯</a></li>
<li><a href="#82-%E6%B7%BB%E5%8A%A0%E4%BB%BB%E5%8A%A1%E6%96%B9%E6%B3%95">8.2 æ·»åŠ ä»»åŠ¡æ–¹æ³•</a></li>
<li><a href="#83-%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95%E8%B0%83%E7%94%A8">8.3 å®ç°æ–¹æ³•è°ƒç”¨</a></li>
<li><a href="#84-api%E5%92%8Cdb%E6%96%87%E4%BB%B6%E5%A4%B9">8.4 apiå’Œdbæ–‡ä»¶å¤¹</a></li>
</ul>
</li>
<li><a href="#9-%E5%8F%91%E5%B8%83">9 å‘å¸ƒ</a>
<ul>
<li><a href="#91-%E8%87%AA%E5%8A%A8%E5%8F%91%E5%B8%83">9.1 è‡ªåŠ¨å‘å¸ƒ</a></li>
<li><a href="#92-%E4%BB%BB%E5%8A%A1%E5%8F%91%E5%B8%83">9.2 ä»»åŠ¡å‘å¸ƒ</a></li>
<li><a href="#93-%E4%BB%BB%E5%8A%A1%E8%AE%A2%E9%98%85">9.3 ä»»åŠ¡è®¢é˜…</a></li>
<li><a href="#94-%E5%8A%A0%E8%BD%BD%E7%8A%B6%E6%80%81">9.4 åŠ è½½çŠ¶æ€</a></li>
<li><a href="#95-%E6%A3%80%E6%9F%A5%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90">9.5 æ£€æŸ¥ç”¨æˆ·æƒé™</a></li>
</ul>
</li>
<li><a href="#10-%E5%9C%A8%E7%A7%BB%E5%8A%A8%E7%AB%AF%E8%BF%90%E8%A1%8C">10 åœ¨ç§»åŠ¨ç«¯è¿è¡Œ</a>
<ul>
<li><a href="#101-ios-%E6%A8%A1%E6%8B%9F%E5%99%A8">10.1 iOS æ¨¡æ‹Ÿå™¨</a></li>
<li><a href="#102-%E5%AE%89%E5%8D%93%E6%A8%A1%E6%8B%9F%E5%99%A8">10.2 å®‰å“æ¨¡æ‹Ÿå™¨</a></li>
<li><a href="#103-%E5%AE%89%E5%8D%93%E8%AE%BE%E5%A4%87">10.3 å®‰å“è®¾å¤‡</a></li>
<li><a href="#104-iphone-or-ipad">10.4 iPhone or iPad</a></li>
</ul>
</li>
<li><a href="#11-%E6%B5%8B%E8%AF%95">11 æµ‹è¯•</a>
<ul>
<li><a href="#111-%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96">11.1 å®‰è£…ä¾èµ–</a></li>
<li><a href="#112-%E8%84%9A%E6%89%8B%E6%9E%B6%E6%B5%8B%E8%AF%95">11.2 è„šæ‰‹æ¶æµ‹è¯•</a></li>
<li><a href="#113-%E6%95%B0%E6%8D%AE%E5%87%86%E5%A4%87">11.3 æ•°æ®å‡†å¤‡</a></li>
<li><a href="#114-%E6%B5%8B%E8%AF%95%E4%BB%BB%E5%8A%A1%E5%88%A0%E9%99%A4">11.4 æµ‹è¯•ä»»åŠ¡åˆ é™¤</a></li>
<li><a href="#115-%E6%9B%B4%E5%A4%9A%E7%9A%84%E6%B5%8B%E8%AF%95">11.5 æ›´å¤šçš„æµ‹è¯•</a></li>
</ul>
</li>
<li><a href="#12-%E9%83%A8%E7%BD%B2">12 éƒ¨ç½²</a>
<ul>
<li><a href="#121-%E5%88%9B%E5%BB%BA%E8%B4%A6%E5%8F%B7">12.1 åˆ›å»ºè´¦å·</a></li>
<li><a href="#122-%E9%83%A8%E7%BD%B2%E5%BA%94%E7%94%A8">12.2 éƒ¨ç½²åº”ç”¨</a></li>
<li><a href="#123-%E8%AE%BF%E9%97%AE%E5%B9%B6%E4%BA%AB%E5%8F%97%E5%90%A7">12.3 è®¿é—®å¹¶äº«å—å§</a></li>
</ul>
</li>
<li><a href="#13-%E5%90%8E%E7%BB%AD">13 åç»­</a></li>
</ul>
<!-- markdown-toc end -->
<blockquote>
<p>æœ¬æ–‡æ¡£ç¿»è¯‘è‡ª <a href="https://react-tutorial.meteor.com">Meteor React Tutorial</a></p>
</blockquote>
<p>åœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ React å’Œ Meteor å¹³å°å»ºç«‹ä¸€ä¸ªç®€å•çš„å¾…åŠäº‹é¡¹åº”ç”¨ã€‚Meteor ä¸å…¶ä»–ä¸€äº›æ¡†æ¶å¦‚ Blazeã€Angular å’Œ Vue éƒ½å¯ä»¥å¼€ç®±å³ç”¨ã€‚</p>
<p>æˆ‘ä»¬æ¨èä½ åœ¨è¿™é‡ŒæŸ¥çœ‹æˆ‘ä»¬æ‰€æœ‰çš„æ•™ç¨‹ã€‚ç°åœ¨ï¼Œè®©æˆ‘ä»¬å¼€å§‹ç”¨ Meteor æ„å»ºä½ çš„ React To-Doåº”ç”¨ç¨‹åºå§!</p>
<h1 id="1-åˆ›å»ºapp">1 åˆ›å»ºapp</h1>
<h2 id="11-å®‰è£…-meteor">1.1 å®‰è£… Meteor</h2>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£… Meteorã€‚æŒ‰ç…§æ¥ä¸‹æ¥æ–‡æ¡£ä¸­çš„æ­¥éª¤å®‰è£…æœ€æ–°çš„ Meteor å®˜æ–¹å‘å¸ƒç‰ˆæœ¬ã€‚</p>
<h2 id="12-åˆ›å»º-meteor-é¡¹ç›®">1.2 åˆ›å»º Meteor é¡¹ç›®</h2>
<p>ç”¨ React è®¾ç½® Meteor çš„æœ€ç®€å•çš„æ–¹æ³•æ˜¯ä½¿ç”¨ <code>meteor create</code> å‘½ä»¤ï¼Œå¹¶åŠ ä¸Šé€‰é¡¹ <code>--react</code> å’Œä½ çš„é¡¹ç›®åç§°ï¼ˆä½ ä¹Ÿå¯ä»¥çœç•¥ <code>--react</code> é€‰é¡¹ï¼Œå› ä¸ºå®ƒæ˜¯é»˜è®¤çš„ï¼‰ã€‚</p>
<pre><code>meteor create simple-todos-react
</code></pre>
<p>Meteor å°†ä¸ºä½ åˆ›å»ºæ‰€æœ‰å¿…è¦çš„æ–‡ä»¶ã€‚</p>
<p>ä½äºå®¢æˆ·ç«¯ç›®å½•ä¸‹çš„æ–‡ä»¶æ­£åœ¨è®¾ç½®ä½ çš„å®¢æˆ·ç«¯ï¼ˆwebï¼‰ï¼Œä½ å¯ä»¥çœ‹åˆ°ä¾‹å¦‚ client/main.jsxï¼ŒMeteor æ­£åœ¨å°†ä½ çš„åº”ç”¨ç¨‹åºçš„ä¸»è¦ç»„ä»¶æ¸²æŸ“æˆ HTMLã€‚</p>
<p>å¦å¤–ï¼Œæ£€æŸ¥æœåŠ¡å™¨ç›®å½•ï¼ŒMeteor æ­£åœ¨è®¾ç½®æœåŠ¡å™¨ç«¯ï¼ˆNode.jsï¼‰ï¼Œä½ å¯ä»¥çœ‹åˆ° server/main.js æ­£åœ¨ç”¨ä¸€äº›æ•°æ®åˆå§‹åŒ–ä½ çš„ MongoDB æ•°æ®åº“ã€‚ä½ ä¸éœ€è¦å®‰è£… MongoDBï¼Œå› ä¸º Meteor æä¾›äº†å®ƒçš„åµŒå…¥å¼ç‰ˆæœ¬ä¾›ä½ ä½¿ç”¨ã€‚</p>
<p>ç°åœ¨ä½ å¯ä»¥ç”¨ä»¥ä¸‹æ–¹å¼è¿è¡Œä½ çš„ Meteor åº”ç”¨ç¨‹åºã€‚</p>
<pre><code>meteor run
</code></pre>
<p>åˆ«æ‹…å¿ƒï¼Œä»ç°åœ¨å¼€å§‹ï¼ŒMeteorä¼šè®©ä½ çš„åº”ç”¨ç¨‹åºä¸ä½ çš„æ‰€æœ‰å˜åŒ–ä¿æŒåŒæ­¥ã€‚</p>
<p>ä½ çš„Reactä»£ç å°†ä½äº import/ui ç›®å½•ä¸‹ï¼Œè€Œ App.jsx æ–‡ä»¶æ˜¯ä½ çš„ React To-doåº”ç”¨çš„æ ¹ç»„ä»¶ã€‚</p>
<p>å¿«é€Ÿæµè§ˆä¸€ä¸‹ Meteor åˆ›å»ºçš„æ‰€æœ‰æ–‡ä»¶ï¼Œä½ ç°åœ¨ä¸éœ€è¦ç†è§£å®ƒä»¬ï¼Œä½†çŸ¥é“å®ƒä»¬åœ¨å“ªé‡Œæ˜¯å¾ˆå¥½çš„ã€‚</p>
<h2 id="13-åˆ›å»ºä»»åŠ¡ç»„ä»¶">1.3 åˆ›å»ºä»»åŠ¡ç»„ä»¶</h2>
<p>ç°åœ¨ä½ å°†è¿›è¡Œç¬¬ä¸€æ¬¡ä¿®æ”¹ã€‚åœ¨ä½ çš„ ui æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªåä¸º Task.jsx çš„æ–°æ–‡ä»¶ã€‚</p>
<p>è¿™ä¸ªæ–‡ä»¶å°†å¯¼å‡ºä¸€ä¸ªåä¸º Task çš„ Reactç»„ä»¶ï¼Œå®ƒå°†ä»£è¡¨ä½ çš„å¾…åŠäº‹é¡¹åˆ—è¡¨ä¸­çš„ä¸€ä¸ªä»»åŠ¡ã€‚</p>
<p><strong>imports/ui/Task.jsx</strong></p>
<pre><code>import React from 'react';

export const Task = ({ task }) =&gt; {
  return &lt;li&gt;{task.text}&lt;/li&gt;
};
</code></pre>
<p>ç”±äºè¿™ä¸ªç»„ä»¶å°†åœ¨ä¸€ä¸ªåˆ—è¡¨ä¸­ï¼Œä½ å°†è¿”å›ä¸€ä¸ªliå…ƒç´ ã€‚</p>
<h2 id="14-åˆ›å»ºä»»åŠ¡ç¤ºä¾‹">1.4 åˆ›å»ºä»»åŠ¡ç¤ºä¾‹</h2>
<p>ç”±äºä½ è¿˜æ²¡æœ‰è¿æ¥åˆ°ä½ çš„æœåŠ¡å™¨å’Œæ•°æ®åº“ï¼Œè®©æˆ‘ä»¬å®šä¹‰ä¸€äº›æ ·æœ¬æ•°æ®ï¼Œè¿™äº›æ•°æ®å¾ˆå¿«å°±ä¼šè¢«ç”¨æ¥å‘ˆç°ä¸€ä¸ªä»»åŠ¡åˆ—è¡¨ã€‚å®ƒå°†æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œä½ å¯ä»¥ç§°å®ƒä¸ºtasksã€‚</p>
<p><strong>imports/ui/App.jsx</strong></p>
<pre><code>import React from 'react';

const tasks = [
  {_id: 1, text: 'First Task'},
  {_id: 2, text: 'Second Task'},
  {_id: 3, text: 'Third Task'},
];

export const App = () =&gt; ...
</code></pre>
<p>ä½ å¯ä»¥å°†ä»»ä½•å†…å®¹ä½œä¸ºæ¯ä¸ªä»»åŠ¡ä¸Šçš„textå±æ€§ã€‚è¦æœ‰åˆ›é€ æ€§!</p>
<h2 id="15-æ¸²æŸ“ä»»åŠ¡ç¤ºä¾‹">1.5 æ¸²æŸ“ä»»åŠ¡ç¤ºä¾‹</h2>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ç”¨Reactå®ç°ä¸€äº›ç®€å•çš„æ¸²æŸ“é€»è¾‘ã€‚æˆ‘ä»¬ç°åœ¨å¯ä»¥ä½¿ç”¨æˆ‘ä»¬ä¹‹å‰çš„ä»»åŠ¡ç»„ä»¶æ¥æ¸²æŸ“æˆ‘ä»¬çš„åˆ—è¡¨é¡¹ã€‚</p>
<p>åœ¨Reactä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨{ }æ¥åœ¨å®ƒä»¬ä¹‹é—´ç¼–å†™Javascriptä»£ç ã€‚</p>
<p>è¯·çœ‹ä¸‹é¢ï¼Œä½ å°†ä½¿ç”¨æ•°ç»„å¯¹è±¡çš„.mapå‡½æ•°æ¥è¿­ä»£ä½ çš„æ ·æœ¬ä»»åŠ¡ã€‚</p>
<p><strong>imports/ui/App.jsx</strong></p>
<pre><code>import React from 'react';
import { Task } from './Task';

const tasks = ..;

export const App = () =&gt; (
  &lt;div&gt;
    &lt;h1&gt;Welcome to Meteor!&lt;/h1&gt;

    &lt;ul&gt;
      { tasks.map(task =&gt; &lt;Task key={ task._id } task={ task }/&gt;) }
    &lt;/ul&gt;
  &lt;/div&gt;
);
</code></pre>
<p>è®°å¾—ç»™ä½ çš„ä»»åŠ¡æ·»åŠ  <code>key</code> å±æ€§ï¼Œå¦åˆ™Reactä¼šå‘å‡ºè­¦å‘Šï¼Œå› ä¸ºå®ƒå°†çœ‹åˆ°è®¸å¤šç›¸åŒç±»å‹çš„ç»„ä»¶ä½œä¸ºå…„å¼ŸèŠ‚ç‚¹ã€‚å¦‚æœæ²¡æœ‰é”®ï¼ŒReactå°†å¾ˆéš¾åœ¨å¿…è¦æ—¶é‡æ–°æ¸²æŸ“å…¶ä¸­ä¸€ä¸ªã€‚</p>
<blockquote>
<p>ä½ å¯ä»¥åœ¨<a href="https://reactjs.org/docs/lists-and-keys.html#keys">è¿™é‡Œ</a>é˜…è¯»æ›´å¤šå…³äºReactå’Œé”®çš„ä¿¡æ¯ã€‚</p>
</blockquote>
<p>ä»ä½ çš„Appç»„ä»¶ä¸­åˆ é™¤ Hello å’Œ Infoï¼Œè®°å¾—ä¹Ÿè¦åˆ é™¤æ–‡ä»¶é¡¶éƒ¨çš„å¯¼å…¥ã€‚åŒæ—¶åˆ é™¤ Hello.jsx å’Œ Info.jsx æ–‡ä»¶ã€‚</p>
<h2 id="16-ç§»åŠ¨ç«¯å¤–è§‚">1.6 ç§»åŠ¨ç«¯å¤–è§‚</h2>
<p>è®©æˆ‘ä»¬æ¥çœ‹çœ‹ä½ çš„åº”ç”¨ç¨‹åºåœ¨ç§»åŠ¨ç«¯ä¸Šçš„è¡¨ç°å¦‚ä½•ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨æµè§ˆå™¨ä¸­å³å‡»ä½ çš„åº”ç”¨ç¨‹åºæ¥æ¨¡æ‹Ÿç§»åŠ¨ç¯å¢ƒï¼ˆæˆ‘ä»¬å‡è®¾ä½ ä½¿ç”¨çš„æ˜¯è°·æ­Œæµè§ˆå™¨ï¼Œå› ä¸ºå®ƒæ˜¯å½“ä»Šæœ€æµè¡Œçš„æµè§ˆå™¨ï¼‰ï¼Œç„¶åæ£€æŸ¥ï¼Œè¿™å°†åœ¨ä½ çš„æµè§ˆå™¨ä¸­æ‰“å¼€ä¸€ä¸ªåä¸º &ldquo;å¼€å‘å·¥å…· &ldquo;çš„æ–°çª—å£ã€‚åœ¨å¼€å‘å·¥å…·ä¸­ï¼Œä½ æœ‰ä¸€ä¸ªå°å›¾æ ‡ï¼Œæ˜¾ç¤ºä¸€ä¸ªç§»åŠ¨è®¾å¤‡å’Œä¸€ä¸ªå¹³æ¿ç”µè„‘ï¼š</p>
<center><img src="/image/step01-dev-tools-mobile-toggle.png" width="100%" /></center>
<p>ç‚¹å‡»å®ƒï¼Œç„¶ååœ¨é¡¶éƒ¨æ ä¸­é€‰æ‹©ä½ æƒ³æ¨¡æ‹Ÿçš„æ‰‹æœºã€‚</p>
<blockquote>
<p>ä½ ä¹Ÿå¯ä»¥åœ¨ä½ çš„æ‰‹æœºä¸Šæ£€æŸ¥ä½ çš„åº”ç”¨ç¨‹åºã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œåœ¨ä½ çš„æ‰‹æœºæµè§ˆå™¨çš„å¯¼èˆªæµè§ˆå™¨ä¸­ä½¿ç”¨ä½ çš„æœ¬åœ°IPè¿æ¥åˆ°ä½ çš„åº”ç”¨ç¨‹åºã€‚
åœ¨Unixç³»ç»Ÿä¸­ï¼Œè¿™ä¸ªå‘½ä»¤è‡³å°‘å¯ä»¥ä¸ºä½ æ‰“å°å‡ºä½ çš„æœ¬åœ°IP: <code>ifconfig | grep &quot;inet &quot; | grep -Fv 127.0.0.1 | awk '{print $2}'</code></p>
</blockquote>
<p>ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„å†…å®¹ã€‚</p>
<center><img src="/image/step01-mobile-without-meta-tags.png" width="20%" /></center>
<p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œä¸€åˆ‡éƒ½å¾ˆå°ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰ä¸ºç§»åŠ¨è®¾å¤‡è°ƒæ•´è§†å›¾ç«¯å£ã€‚ä½ å¯ä»¥é€šè¿‡åœ¨ä½ çš„ client/main.html æ–‡ä»¶ä¸­çš„ headæ ‡ç­¾å†…ã€titleæ ‡ç­¾åæ·»åŠ ä¸‹é¢è¿™å‡ è¡Œæ¥è§£å†³è¿™ä¸ªé—®é¢˜å’Œå…¶ä»–ç±»ä¼¼é—®é¢˜ã€‚</p>
<p><strong>client/main.html</strong></p>
<pre><code>&lt;meta charset=&quot;utf-8&quot;/&gt;
&lt;meta http-equiv=&quot;x-ua-compatible&quot; content=&quot;ie=edge&quot;/&gt;
&lt;meta
  name=&quot;viewport&quot;
  content=&quot;width=device-width, height=device-height, viewport-fit=cover, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no&quot;
/&gt;
&lt;meta name=&quot;mobile-web-app-capable&quot; content=&quot;yes&quot;/&gt;
&lt;meta name=&quot;apple-mobile-web-app-capable&quot; content=&quot;yes&quot;/&gt;
</code></pre>
<p>ç°åœ¨ä½ çš„åº”ç”¨ç¨‹åºåº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·:</p>
<center><img src="/image/step01-mobile-with-meta-tags.png" width="20%" /></center>
<h2 id="17-æ›´æ¢çƒ­æ¨¡å—">1.7 æ›´æ¢çƒ­æ¨¡å—</h2>
<p>Meteoré»˜è®¤åœ¨ä½¿ç”¨Reactæ—¶å·²ç»ä¸ºä½ æ·»åŠ äº†ä¸€ä¸ªå«åš hot-module-replacementçš„åŒ…ã€‚è¿™ä¸ªåŒ…ä¼šæ›´æ–°æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºä¸­åœ¨é‡å»ºè¿‡ç¨‹ä¸­è¢«ä¿®æ”¹çš„javascriptæ¨¡å—ã€‚ç¼©çŸ­äº†å¼€å‘æ—¶çš„åé¦ˆå‘¨æœŸï¼Œæ‰€ä»¥ä½ å¯ä»¥æ›´å¿«åœ°æŸ¥çœ‹å’Œæµ‹è¯•å˜åŒ–ï¼ˆå®ƒç”šè‡³ä¼šåœ¨æ„å»ºå®Œæˆä¹‹å‰æ›´æ–°åº”ç”¨ï¼‰ã€‚ä½ ä¹Ÿä¸ä¼šä¸¢å¤±çŠ¶æ€ï¼Œä½ çš„åº”ç”¨ä»£ç ä¼šè¢«æ›´æ–°ï¼Œä½ çš„çŠ¶æ€ä¹Ÿä¼šæ˜¯ä¸€æ ·çš„ã€‚</p>
<p>ä½ è¿˜åº”è¯¥åœ¨è¿™æ—¶æ·»åŠ  dev-error-overlayåŒ…ï¼Œè¿™æ ·ä½ å°±å¯ä»¥åœ¨ä½ çš„ç½‘ç»œæµè§ˆå™¨ä¸­çœ‹åˆ°é”™è¯¯ã€‚</p>
<pre><code>meteor add dev-error-overlay
</code></pre>
<p>ä½ å¯ä»¥è¯•ç€çŠ¯ä¸€äº›é”™è¯¯ï¼Œç„¶åä½ å°±ä¼šåœ¨æµè§ˆå™¨ä¸­çœ‹åˆ°é”™è¯¯ï¼Œè€Œä¸ä»…ä»…æ˜¯åœ¨æ§åˆ¶å°ä¸­ã€‚</p>
<blockquote>
<p>å›é¡¾ï¼šä½ å¯ä»¥åœ¨<a href="https://github.com/meteor/react-tutorial/tree/master/src/simple-todos/step01">è¿™é‡Œ</a>æ£€æŸ¥ä½ çš„ä»£ç åœ¨å½“å‰æ­¥éª¤ç»“æŸæ—¶åº”è¯¥æ˜¯æ€æ ·çš„ã€‚</p>
</blockquote>
<p>ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†ä¸ MongoDBæ•°æ®åº“åˆä½œï¼Œä»¥å­˜å‚¨æˆ‘ä»¬çš„ä»»åŠ¡ã€‚</p>
<h1 id="2-é›†åˆ">2 é›†åˆ</h1>
<p>Meteorå·²ç»ä¸ºä½ è®¾ç½®äº† MongoDBã€‚ä¸ºäº†ä½¿ç”¨æ•°æ®åº“ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªé›†åˆï¼Œè¿™å°±æ˜¯å­˜å‚¨æ–‡ä»¶çš„åœ°æ–¹ï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­å°±æ˜¯ tasksã€‚</p>
<blockquote>
<p>ä½ å¯ä»¥åœ¨<a href="http://guide.meteor.com/collections.html">è¿™é‡Œ</a>é˜…è¯»æ›´å¤šå…³äºé›†åˆçš„ä¿¡æ¯ã€‚</p>
</blockquote>
<p>åœ¨è¿™ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å°†å®ç°æ‰€æœ‰å¿…è¦çš„ä»£ç ï¼Œä½¿ç”¨Reacté’©å­(hooks)ä¸ºæˆ‘ä»¬çš„ä»»åŠ¡å»ºç«‹å’Œè¿è¡Œä¸€ä¸ªåŸºæœ¬é›†åˆã€‚</p>
<h2 id="21-åˆ›å»ºä»»åŠ¡é›†åˆ">2.1 åˆ›å»ºä»»åŠ¡é›†åˆ</h2>
<p>æˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ import/api/TasksCollection.js åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶æ¥å­˜å‚¨æˆ‘ä»¬çš„ä»»åŠ¡ï¼Œè¯¥æ–‡ä»¶å®ä¾‹åŒ–äº†ä¸€ä¸ªæ–°çš„ Mongoé›†åˆå¹¶å°†å…¶å¯¼å‡ºã€‚</p>
<p><strong>imports/api/TasksCollection.js</strong></p>
<pre><code>import { Mongo } from 'meteor/mongo';
export const TasksCollection = new Mongo.Collection('tasks');
</code></pre>
<p>æ³¨æ„ï¼Œæˆ‘ä»¬æŠŠæ–‡ä»¶å­˜æ”¾åœ¨ imports/apiç›®å½•ä¸‹ï¼Œè¿™æ˜¯ä¸€ä¸ªå­˜æ”¾APIç›¸å…³ä»£ç çš„åœ°æ–¹ï¼Œæ¯”å¦‚å‡ºç‰ˆç‰©å’Œæ–¹æ³•ã€‚ä½ å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°å‘½åè¿™ä¸ªæ–‡ä»¶å¤¹ï¼Œè¿™åªæ˜¯ä¸€ç§é€‰æ‹©è€Œå·²ã€‚</p>
<p>ä½ å¯ä»¥åˆ é™¤è¿™ä¸ªæ–‡ä»¶å¤¹ä¸­çš„ link.jsæ–‡ä»¶ï¼Œå› ä¸ºæˆ‘ä»¬ä¸æ‰“ç®—ä½¿ç”¨è¿™ä¸ªé›†åˆã€‚</p>
<blockquote>
<p>ä½ å¯ä»¥åœ¨<a href="http://guide.meteor.com/structure.html">è¿™é‡Œ</a>é˜…è¯»æ›´å¤šå…³äºåº”ç”¨ç¨‹åºç»“æ„å’Œ imports/exports çš„ä¿¡æ¯ã€‚</p>
</blockquote>
<h2 id="22-åˆå§‹åŒ–ä»»åŠ¡é›†">2.2 åˆå§‹åŒ–ä»»åŠ¡é›†</h2>
<p>ä¸ºäº†è®©æˆ‘ä»¬çš„é›†åˆå‘æŒ¥ä½œç”¨ï¼Œä½ éœ€è¦åœ¨æœåŠ¡å™¨ä¸­å¯¼å…¥å®ƒï¼Œä»¥ä¾¿å®ƒè®¾ç½®ä¸€äº›ç®¡é“ã€‚</p>
<p>ä½ å¯ä»¥ä½¿ç”¨ <code>import &quot;/imports/api/TasksCollection&quot;</code> æˆ–è€… <code>import { TasksCollection } from &quot;/imports/api/TasksCollection&quot;</code> å¦‚æœä½ è¦åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸Šä½¿ç”¨ï¼Œä½†è¦ç¡®ä¿å®ƒè¢«å¯¼å…¥ã€‚</p>
<p>ç°åœ¨å¾ˆå®¹æ˜“æ£€æŸ¥æˆ‘ä»¬çš„é›†åˆä¸­æ˜¯å¦æœ‰æ•°æ®ï¼Œå¦åˆ™æˆ‘ä»¬ä¹Ÿå¯ä»¥è½»æ¾åœ°æ’å…¥ä¸€äº›æ ·æœ¬æ•°æ®ã€‚</p>
<p>ä½ ä¸éœ€è¦ä¿ç•™ server/main.jsçš„æ—§å†…å®¹ã€‚</p>
<p><strong>server/main.js</strong></p>
<pre><code>import { Meteor } from 'meteor/meteor';
import { TasksCollection } from '/imports/api/TasksCollection';

const insertTask = taskText =&gt; TasksCollection.insert({ text: taskText });

Meteor.startup(() =&gt; {
  if (TasksCollection.find().count() === 0) {
    [
      'First Task',
      'Second Task',
      'Third Task',
      'Fourth Task',
      'Fifth Task',
      'Sixth Task',
      'Seventh Task'
    ].forEach(insertTask)
  }
});
</code></pre>
<p>å› æ­¤ï¼Œä½ æ­£åœ¨å¯¼å…¥ TasksCollectionï¼Œå¹¶åœ¨å…¶ä¸Šæ·»åŠ ä¸€äº›ä»»åŠ¡ï¼šè¿­ä»£ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œå¯¹æ¯ä¸ªå­—ç¬¦ä¸²è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨æˆ‘ä»¬çš„ä»»åŠ¡æ–‡ä»¶ä¸­æ’å…¥è¿™ä¸ªå­—ç¬¦ä¸²ä½œä¸ºæˆ‘ä»¬çš„æ–‡æœ¬å­—æ®µã€‚</p>
<h2 id="23-æ¸²æŸ“ä»»åŠ¡é›†åˆ">2.3 æ¸²æŸ“ä»»åŠ¡é›†åˆ</h2>
<p>ç°åœ¨æœ‰è¶£çš„éƒ¨åˆ†æ¥äº†ï¼Œä½ å°†ä½¿ç”¨ä¸€ä¸ªReactå‡½æ•°ç»„ä»¶å’Œä¸€ä¸ªå«åš useTrackerçš„Hookä»ä¸€ä¸ªå«åš react-meteor-dataçš„åŒ…ä¸­æ¸²æŸ“ä»»åŠ¡ã€‚</p>
<blockquote>
<p>Meteorä¸ MeteoråŒ…å’Œ NPMåŒ…ä¸€èµ·å·¥ä½œï¼Œé€šå¸¸ MeteoråŒ…æ˜¯ä½¿ç”¨ Meteorçš„å†…éƒ¨ç¨‹åºæˆ–å…¶ä»– MeteoråŒ…ã€‚</p>
</blockquote>
<p>è¿™ä¸ªåŒ…å·²ç»åŒ…å«åœ¨Reactçš„éª¨æ¶(meteor create yourproject)ï¼Œæ‰€ä»¥ä½ ä¸éœ€è¦æ·»åŠ å®ƒï¼Œä½†ä½ å¯ä»¥éšæ—¶è¿è¡Œ <code>meteor add package-name</code> æ·»åŠ  MeteoråŒ…ã€‚</p>
<pre><code>meteor add react-meteor-data
</code></pre>
<p>ç°åœ¨ä½ å·²ç»å‡†å¤‡å¥½ä»è¿™ä¸ªåŒ…ä¸­å¯¼å…¥ä»£ç äº†ï¼Œå½“ä» MeteoråŒ…ä¸­å¯¼å…¥ä»£ç æ—¶ï¼Œä¸NPMæ¨¡å—å”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œä½ éœ€è¦åœ¨å¯¼å…¥çš„ froméƒ¨åˆ†å‰åŠ ä¸Š meteor/ã€‚</p>
<p>react-meteor-data å¯¼å‡ºçš„ useTrackerå‡½æ•°æ˜¯ä¸€ä¸ª React Hookï¼Œå…è®¸ä½ çš„Reactç»„ä»¶ä½œå‡ºååº”ã€‚æ¯å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä½ çš„ç»„ä»¶å°†é‡æ–°æ¸²æŸ“ã€‚å¾ˆé…·ï¼Œå¯¹å—ï¼Ÿ</p>
<blockquote>
<p>å…³äºReact Hooksçš„æ›´å¤šä¿¡æ¯ï¼Œè¯·é˜…è¯»<a href="https://reactjs.org/docs/hooks-faq.html">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p><strong>imports/ui/App.jsx</strong></p>
<pre><code>import React from 'react';
import { useTracker } from 'meteor/react-meteor-data';
import { TasksCollection } from '/imports/api/TasksCollection';
import { Task } from './Task';

export const App = () =&gt; {
  const tasks = useTracker(() =&gt; TasksCollection.find({}).fetch());

  return (
    &lt;div&gt;
      &lt;h1&gt;Welcome to Meteor!&lt;/h1&gt;

      &lt;ul&gt;
        { tasks.map(task =&gt; &lt;Task key={ task._id } task={ task }/&gt;) }
      &lt;/ul&gt;
    &lt;/div&gt;
  );
};
</code></pre>
<p>çœ‹çœ‹ä½ çš„åº”ç”¨ç¨‹åºç°åœ¨åº”è¯¥æ˜¯ä»€ä¹ˆæ ·å­:</p>
<center><img src="/image/step02-tasks-list.png" width="20%" /></center>
<p>ä½ å¯ä»¥åœ¨æœåŠ¡å™¨ä¸Šæ”¹å˜ä½ çš„ MongoDBçš„æ•°æ®ï¼Œä½ çš„åº”ç”¨ç¨‹åºå°†ä¸ºä½ åšå‡ºååº”å¹¶é‡æ–°æ¸²æŸ“ã€‚</p>
<p>ä½ å¯ä»¥ä»ä½ çš„åº”ç”¨ç¨‹åºæ–‡ä»¶å¤¹æˆ–ä½¿ç”¨ Mongo UIå®¢æˆ·ç«¯ï¼Œå¦‚ NoSQLBoosterï¼Œåœ¨ç»ˆç«¯é€šè¿‡è¿è¡Œ <code>meteor mongo</code> è¿æ¥åˆ°çš„MongoDBã€‚ä½ çš„åµŒå…¥å¼ MongoDBåœ¨ 3001ç«¯å£è¿è¡Œã€‚</p>
<p>è¯·çœ‹å¦‚ä½•è¿æ¥ï¼š</p>
<center><img src="/image/step02-connect-mongo.png" width="100%" /></center>
<p>çœ‹çœ‹æ•°æ®åº“ï¼š</p>
<center><img src="/image/step02-see-your-db.png" width="100%" /></center>
<p>ä½ å¯ä»¥åŒå‡»ä½ çš„é›†åˆï¼Œä»¥æŸ¥çœ‹å­˜å‚¨åœ¨å…¶ä¸­çš„æ–‡ä»¶ï¼š</p>
<center><img src="/image/step02-see-your-collection.png" width="100%" /></center>
<p>ä½†æ˜¯ï¼Œç­‰ç­‰ï¼Œæˆ‘çš„ä»»åŠ¡æ˜¯å¦‚ä½•ä»æœåŠ¡å™¨ä¼ åˆ°å®¢æˆ·ç«¯çš„ï¼Ÿæˆ‘ä»¬å°†åœ¨åé¢å…³äºå‡ºç‰ˆç‰©å’Œè®¢é˜…çš„æ­¥éª¤ä¸­è§£é‡Šè¿™ä¸ªé—®é¢˜ã€‚ä½ ç°åœ¨éœ€è¦çŸ¥é“çš„æ˜¯ï¼Œä½ æ­£åœ¨æŠŠæ•°æ®åº“ä¸­çš„æ‰€æœ‰æ•°æ®å‘å¸ƒåˆ°å®¢æˆ·ç«¯ã€‚è¿™ä¸€ç‚¹ä»¥åä¼šè¢«åˆ é™¤ï¼Œå› ä¸ºæˆ‘ä»¬ä¸æƒ³ä¸€ç›´å‘å¸ƒæ‰€æœ‰çš„æ•°æ®ã€‚</p>
<blockquote>
<p>å›é¡¾ï¼šä½ å¯ä»¥åœ¨<a href="https://github.com/meteor/react-tutorial/tree/master/src/simple-todos/step02">è¿™é‡Œ</a>æ£€æŸ¥ä½ çš„ä»£ç åœ¨è¿™ä¸€æ­¥éª¤ç»“æŸæ—¶åº”è¯¥æ˜¯æ€æ ·çš„</p>
</blockquote>
<p>åœ¨ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€ä¸ªè¡¨å•æ¥åˆ›å»ºä»»åŠ¡ã€‚</p>
<h1 id="3-è¡¨å•å’Œäº‹ä»¶">3 è¡¨å•å’Œäº‹ä»¶</h1>
<p>æ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½éœ€è¦å…è®¸ç”¨æˆ·ä¸å­˜å‚¨çš„æ•°æ®è¿›è¡ŒæŸäº›ç±»å‹çš„äº¤äº’ã€‚åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œç¬¬ä¸€ç§ç±»å‹çš„äº¤äº’æ˜¯æ’å…¥æ–°çš„ä»»åŠ¡ã€‚æ²¡æœ‰å®ƒï¼Œæˆ‘ä»¬çš„ To-Doåº”ç”¨å°±ä¸ä¼šæœ‰ä»€ä¹ˆå¸®åŠ©ã€‚</p>
<p>ç”¨æˆ·åœ¨ç½‘ç«™ä¸Šæ’å…¥æˆ–ç¼–è¾‘æ•°æ®çš„ä¸»è¦æ–¹å¼ä¹‹ä¸€æ˜¯é€šè¿‡è¡¨å•ã€‚åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä½¿ç”¨ <code>&lt;form&gt;</code> æ ‡ç­¾æ˜¯ä¸ªå¥½ä¸»æ„ï¼Œå› ä¸ºå®ƒä¸ºé‡Œé¢çš„å…ƒç´ èµ‹äºˆäº†è¯­ä¹‰ã€‚</p>
<h2 id="31-åˆ›å»ºä»»åŠ¡è¡¨å•">3.1 åˆ›å»ºä»»åŠ¡è¡¨å•</h2>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç®€å•çš„è¡¨å•ç»„ä»¶æ¥å°è£…æˆ‘ä»¬çš„é€»è¾‘ã€‚å¦‚ä½ æ‰€è§ï¼Œæˆ‘ä»¬è®¾ç½®äº† <code>useState</code> React Hookã€‚</p>
<p>è¯·æ³¨æ„æ•°ç»„çš„è§£æ„<code>[text, setText]</code>ï¼Œå…¶ä¸­<code>text</code>æ˜¯æˆ‘ä»¬è¦ä½¿ç”¨çš„å­˜å‚¨å€¼ï¼Œåœ¨è¿™é‡Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼›è€Œ<code>setText</code>æ˜¯ä¸€ä¸ªç”¨æ¥æ›´æ–°è¯¥å€¼çš„å‡½æ•°ã€‚</p>
<p>åœ¨ä½ çš„<code>ui</code>æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶ <code>TaskForm.jsx</code>ã€‚</p>
<p><strong>imports/ui/TaskForm.jsx</strong></p>
<pre><code>import React, { useState } from 'react';
 
export const TaskForm = () =&gt; {
  const [text, setText] = useState(&quot;&quot;);
 
  return (
    &lt;form className=&quot;task-form&quot;&gt;
      &lt;input
        type=&quot;text&quot;
        placeholder=&quot;Type to add new tasks&quot;
      /&gt;
 
      &lt;button type=&quot;submit&quot;&gt;Add Task&lt;/button&gt;
    &lt;/form&gt;
  );
};
</code></pre>
<h2 id="32-æ›´æ–°appç»„ä»¶">3.2 æ›´æ–°Appç»„ä»¶</h2>
<p>ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°å°†å…¶æ·»åŠ åˆ°ä½ çš„ä»»åŠ¡åˆ—è¡¨ä¸Šæ–¹çš„Appç»„ä»¶ä¸­ã€‚</p>
<p><strong>imports/ui/App.jsx</strong></p>
<pre><code>import { useTracker } from 'meteor/react-meteor-data';
import { Task } from './Task';
import { TasksCollection } from '/imports/api/TasksCollection';
import { TaskForm } from './TaskForm';
 
export const App = () =&gt; {
  const tasks = useTracker(() =&gt; TasksCollection.find({}).fetch());

  return (
    &lt;div&gt;
      &lt;h1&gt;Welcome to Meteor!&lt;/h1&gt;

      &lt;TaskForm/&gt;

      &lt;ul&gt;
        { tasks.map(task =&gt; &lt;Task key={ task._id } task={ task }/&gt;) }
      &lt;/ul&gt;
    &lt;/div&gt;
  );
};
</code></pre>
<h2 id="33-æ›´æ–°æ ·å¼è¡¨">3.3 æ›´æ–°æ ·å¼è¡¨</h2>
<p>ä½ ä¹Ÿå¯ä»¥æŒ‰ç…§ä½ çš„æ„æ„¿æ¥è®¾è®¡å®ƒçš„æ ·å¼ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨é¡¶éƒ¨ç•™å‡ºä¸€äº›ç©ºç™½ï¼Œè¿™æ ·è¡¨æ ¼å°±ä¸ä¼šæ˜¾å¾—ä¸ä¼¦ä¸ç±»ã€‚æ·»åŠ CSSç±»<code>.task-form</code>ï¼Œè¿™éœ€è¦ä¸è¡¨å•ç»„ä»¶ä¸­çš„ <code>className</code>å±æ€§çš„åç§°ç›¸åŒã€‚</p>
<p><strong>client/main.css</strong></p>
<pre><code>.task-form {
  margin-top: 1rem;
}
</code></pre>
<h2 id="34-æ·»åŠ æäº¤å¤„ç†ç¨‹åº">3.4 æ·»åŠ æäº¤å¤„ç†ç¨‹åº</h2>
<p>ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨<code>onSubmit</code>äº‹ä»¶ç»™ä½ çš„è¡¨å•é™„åŠ ä¸€ä¸ªæäº¤å¤„ç†ç¨‹åºï¼›åŒæ—¶å°†ä½ çš„Reacté’©å­æ’å…¥è¾“å…¥å…ƒç´ ä¸­çš„<code>onChange</code>äº‹ä»¶ã€‚</p>
<p>æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œä½ æ­£åœ¨ä½¿ç”¨<code>useState</code> Reacté’©å­æ¥å­˜å‚¨ä½ çš„<code>&lt;input&gt;</code>å…ƒç´ çš„å€¼ã€‚æ³¨æ„ï¼Œä½ è¿˜éœ€è¦å°†ä½ çš„<code>value</code>å±æ€§è®¾ç½®ä¸º<code>text</code>å¸¸é‡ï¼Œè¿™å°†ä½¿<code>input</code>å…ƒç´ ä¸æˆ‘ä»¬çš„é’©å­ä¿æŒåŒæ­¥ã€‚</p>
<blockquote>
<p>åœ¨æ›´å¤æ‚çš„åº”ç”¨ä¸­ï¼Œå¦‚æœåœ¨æ½œåœ¨çš„é¢‘ç¹äº‹ä»¶ï¼ˆå¦‚onChangeï¼‰ä¹‹é—´æœ‰è®¸å¤šè®¡ç®—å‘ç”Ÿï¼Œä½ å¯èƒ½æƒ³å®ç°ä¸€äº›å»å™ªæˆ–èŠ‚æµé€»è¾‘ã€‚æœ‰ä¸€äº›åº“å¯ä»¥å¸®åŠ©ä½ åšåˆ°è¿™ä¸€ç‚¹ï¼Œæ¯”å¦‚è¯´ <code>Lodash</code>ã€‚</p>
</blockquote>
<p><strong>imports/ui/TaskForm.jsx</strong></p>
<pre><code>import React, { useState } from 'react';
import { TasksCollection } from '/imports/api/TasksCollection';
 
export const TaskForm = () =&gt; {
  const [text, setText] = useState(&quot;&quot;);
  
  const handleSubmit = e =&gt; {
    e.preventDefault();

    if (!text) return;

    TasksCollection.insert({
      text: text.trim(),
      createdAt: new Date()
    });

    setText(&quot;&quot;);
  };
 
  return (
    &lt;form className=&quot;task-form&quot; onSubmit={handleSubmit}&gt;
      &lt;input
        type=&quot;text&quot;
        placeholder=&quot;Type to add new tasks&quot;
        value={text}
        onChange={(e) =&gt; setText(e.target.value)}
      /&gt;
 
      &lt;button type=&quot;submit&quot;&gt;Add Task&lt;/button&gt;
    &lt;/form&gt;
  );
};
</code></pre>
<p>åŒæ—¶åœ¨ä½ çš„<code>task</code>æ–‡ä»¶ä¸­æ’å…¥æ—¥æœŸ<code>createdAt</code>ï¼Œè¿™æ ·ä½ å°±èƒ½çŸ¥é“æ¯ä¸ªä»»åŠ¡æ˜¯ä»€ä¹ˆæ—¶å€™åˆ›å»ºçš„ã€‚</p>
<h2 id="35-é¦–å…ˆæ˜¾ç¤ºæœ€æ–°çš„ä»»åŠ¡">3.5 é¦–å…ˆæ˜¾ç¤ºæœ€æ–°çš„ä»»åŠ¡</h2>
<p>ç°åœ¨ä½ åªéœ€è¦åšä¸€ä¸ªèƒ½è®©ç”¨æˆ·æ»¡æ„çš„æ”¹å˜ï¼šæˆ‘ä»¬éœ€è¦å…ˆæ˜¾ç¤ºæœ€æ–°çš„ä»»åŠ¡ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹æˆ‘ä»¬çš„MongoæŸ¥è¯¢è¿›è¡Œæ’åºæ¥å¿«é€Ÿå®Œæˆã€‚</p>
<p><strong>imports/ui/App.jsx</strong></p>
<pre><code>..
 
export const App = () =&gt; {
  const tasks = useTracker(() =&gt; TasksCollection.find({}, { sort: { createdAt: -1 } }).fetch());
..
</code></pre>
<p>ä½ çš„appåº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p>
<center><img src="/image/step03-form-new-task.png" width="20%" style="display: inline;" />
<img src="/image/step03-new-task-on-list.png" width="20%" style="display: inline;" /></center>
<blockquote>
<p>å›é¡¾ï¼šä½ å¯ä»¥åœ¨<a href="https://github.com/meteor/react-tutorial/tree/master/src/simple-todos/step03">è¿™é‡Œ</a>æ£€æŸ¥ä½ çš„ä»£ç åœ¨è¿™ä¸€æ­¥éª¤ç»“æŸæ—¶åº”è¯¥æ˜¯æ€æ ·çš„ã€‚</p>
</blockquote>
<p>åœ¨ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†æ›´æ–°ä½ çš„ä»»åŠ¡çŠ¶æ€ï¼Œå¹¶ä¸ºç”¨æˆ·æä¾›ä¸€ä¸ªåˆ é™¤ä»»åŠ¡çš„æ–¹æ³•ã€‚</p>
<h1 id="4-æ›´æ–°å’Œåˆ é™¤">4 æ›´æ–°å’Œåˆ é™¤</h1>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ åªæ˜¯åœ¨æˆ‘ä»¬çš„é›†åˆä¸­æ’å…¥äº†æ–‡ä»¶ã€‚è®©æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•é€šè¿‡ä¸ç”¨æˆ·ç•Œé¢çš„äº¤äº’æ¥æ›´æ–°å’Œåˆ é™¤å®ƒä»¬ã€‚</p>
<h2 id="41-æ·»åŠ å¤é€‰æ¡†">4.1 æ·»åŠ å¤é€‰æ¡†</h2>
<p>é¦–å…ˆï¼Œä½ éœ€è¦ç»™ä½ çš„ä»»åŠ¡ç»„ä»¶æ·»åŠ ä¸€ä¸ªå¤é€‰æ¡†å…ƒç´ ã€‚</p>
<blockquote>
<p>è¯·ç¡®ä¿æ·»åŠ äº† <code>readOnly</code> å±æ€§ï¼Œå› ä¸ºæˆ‘ä»¬ä¸ä½¿ç”¨ <code>onChange</code> æ¥æ›´æ–°çŠ¶æ€ã€‚</p>
<p>æˆ‘ä»¬è¿˜å¿…é¡»å°†æˆ‘ä»¬çš„ <code>checked</code> å±æ€§å¼ºåˆ¶è®¾ä¸ºå¸ƒå°”å€¼ï¼Œå› ä¸ºReactç†è§£ <code>undefined</code> çš„å€¼æ˜¯ä¸å­˜åœ¨çš„ï¼Œå› æ­¤ä¼šå¯¼è‡´ç»„ä»¶ä»ä¸å—æ§çš„çŠ¶æ€åˆ‡æ¢åˆ°å—æ§çŠ¶æ€ã€‚</p>
<p>æˆ‘ä»¬è¿˜é‚€è¯·ä½ åšæ›´å¤šçš„å®è·µï¼Œçœ‹çœ‹è¿™ä¸ªappæ˜¯å¦‚ä½•è¡¨ç°çš„ï¼Œä»¥ä¾¿å­¦ä¹ ã€‚</p>
</blockquote>
<p>ä½ è¿˜éœ€è¦æ¥æ”¶ä¸€ä¸ªå›è°ƒï¼Œä¸€ä¸ªå½“å¤é€‰æ¡†è¢«ç‚¹å‡»æ—¶å°†è¢«è°ƒç”¨çš„å‡½æ•°ã€‚</p>
<p><strong>imports/ui/Task.jsx</strong></p>
<pre><code>import React from 'react';

export const Task = ({ task, onCheckboxClick }) =&gt; {
  return (
    &lt;li&gt;
      &lt;input
        type=&quot;checkbox&quot;
        checked={!!task.isChecked}
        onClick={() =&gt; onCheckboxClick(task)}
        readOnly
      /&gt;
      &lt;span&gt;{task.text}&lt;/span&gt;
    &lt;/li&gt;
  );
};
</code></pre>
<h2 id="42-åˆ‡æ¢å¤é€‰æ¡†">4.2 åˆ‡æ¢å¤é€‰æ¡†</h2>
<p>ç°åœ¨ä½ å¯ä»¥æ›´æ–°ä½ çš„ä»»åŠ¡æ–‡ä»¶ï¼Œåˆ‡æ¢å…¶isCheckedå­—æ®µã€‚</p>
<p>åˆ›å»ºä¸€ä¸ªå‡½æ•°æ¥æ”¹å˜ä½ çš„æ–‡æ¡£ï¼Œå¹¶å°†å…¶ä¼ é€’ç»™ä½ çš„ä»»åŠ¡ç»„ä»¶ã€‚</p>
<p><strong>imports/ui/App.jsx</strong></p>
<pre><code>const toggleChecked = ({ _id, isChecked }) =&gt; {
  TasksCollection.update(_id, {
    $set: {
      isChecked: !isChecked
    }
  })
};

export const App = () =&gt; {
  ..
  &lt;ul&gt;
    { tasks.map(task =&gt; &lt;Task key={ task._id } task={ task } onCheckboxClick={toggleChecked} /&gt;) }
  &lt;/ul&gt;
  ..
</code></pre>
<p>ä½ çš„appåº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·:</p>
<center><img src="/image/step04-checkbox.png" width="20%" /></center>
<h2 id="43-åˆ é™¤ä»»åŠ¡">4.3 åˆ é™¤ä»»åŠ¡</h2>
<p>ä½ åªéœ€è¦å‡ è¡Œä»£ç å°±å¯ä»¥åˆ é™¤ä»»åŠ¡ã€‚</p>
<p>é¦–å…ˆåœ¨ä½ çš„ä»»åŠ¡ç»„ä»¶ä¸­çš„æ–‡æœ¬åæ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œå¹¶æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚</p>
<p><strong>imports/ui/Task.jsx</strong></p>
<p>import React from &lsquo;react&rsquo;;</p>
<pre><code>export const Task = ({ task, onCheckboxClick, onDeleteClick }) =&gt; {
  return (
..
      &lt;span&gt;{task.text}&lt;/span&gt;
      &lt;button onClick={ () =&gt; onDeleteClick(task) }&gt;&amp;times;&lt;/button&gt;
..
</code></pre>
<p>ç°åœ¨åœ¨appä¸­æ·»åŠ åˆ é™¤é€»è¾‘ï¼Œä½ éœ€è¦æœ‰ä¸€ä¸ªåˆ é™¤ä»»åŠ¡çš„å‡½æ•°ï¼Œå¹¶åœ¨ä»»åŠ¡ç»„ä»¶çš„å›è°ƒå±æ€§ä¸­æä¾›è¿™ä¸ªå‡½æ•°ã€‚</p>
<p><strong>imports/ui/App.jsx</strong></p>
<pre><code>const deleteTask = ({ _id }) =&gt; TasksCollection.remove(_id);

export const App = () =&gt; {
  ..
  &lt;ul&gt;
    { tasks.map(task =&gt; &lt;Task
      key={ task._id }
      task={ task }
      onCheckboxClick={toggleChecked}
      onDeleteClick={deleteTask}
    /&gt;) }
  &lt;/ul&gt;
  ..
}
</code></pre>
<p>ä½ çš„appåº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·:</p>
<center><img src="/image/step04-delete-button.png" width="20%" /></center>
<blockquote>
<p>å›é¡¾ï¼šä½ å¯ä»¥åœ¨<a href="https://github.com/meteor/react-tutorial/tree/master/src/simple-todos/step04">è¿™é‡Œ</a>æ£€æŸ¥ä½ çš„ä»£ç åœ¨è¿™ä¸€æ­¥éª¤ç»“æŸæ—¶åº”è¯¥æ˜¯æ€æ ·çš„</p>
</blockquote>
<p>åœ¨ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ CSS å’Œ Flexbox æ¥æ”¹å–„ä½ çš„appçš„å¤–è§‚ã€‚</p>
<h1 id="5-æ ·å¼">5 æ ·å¼</h1>
<h2 id="51-css">5.1 CSS</h2>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬çš„ç”¨æˆ·ç•Œé¢çœ‹èµ·æ¥ç›¸å½“éš¾çœ‹ã€‚è®©æˆ‘ä»¬æ·»åŠ ä¸€äº›åŸºæœ¬çš„æ ·å¼ï¼Œè¿™å°†ä½œä¸ºä¸€ä¸ªæ›´ä¸“ä¸šçš„appçš„åŸºç¡€ã€‚</p>
<p>ç”¨ä¸‹é¢çš„æ–‡ä»¶æ›¿æ¢ <code>client/main.css</code>æ–‡ä»¶çš„å†…å®¹ï¼Œæˆ‘ä»¬çš„æƒ³æ³•æ˜¯åœ¨é¡¶éƒ¨æœ‰ä¸€ä¸ªåº”ç”¨æ ï¼Œå’Œä¸€ä¸ªå¯æ»šåŠ¨çš„å†…å®¹ï¼ŒåŒ…æ‹¬:</p>
<ul>
<li>æ·»åŠ æ–°ä»»åŠ¡çš„è¡¨å•</li>
<li>ä»»åŠ¡åˆ—è¡¨</li>
</ul>
<p><strong>client/main.css</strong></p>
<pre><code>body {
  font-family: sans-serif;
  background-color: #315481;
  background-image: linear-gradient(to bottom, #315481, #918e82 100%);
  background-attachment: fixed;

  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;

  padding: 0;
  margin: 0;

  font-size: 14px;
}

button {
  font-weight: bold;
  font-size: 1em;
  border: none;
  color: white;
  box-shadow: 0 3px 3px rgba(34, 25, 25, 0.4);
  padding: 5px;
  cursor: pointer;
}

button:focus {
  outline: 0;
}

.app {
  display: flex;
  flex-direction: column;
  height: 100vh;
}

.app-header {
  flex-grow: 1;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.main {
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  overflow: auto;
  background: white;
}

.main::-webkit-scrollbar {
  width: 0;
  height: 0;
  background: inherit;
}

header {
  background: #d2edf4;
  background-image: linear-gradient(to bottom, #d0edf5, #e1e5f0 100%);
  padding: 20px 15px 15px 15px;
  position: relative;
  box-shadow: 0 3px 3px rgba(34, 25, 25, 0.4);
}

.app-bar {
  display: flex;
  justify-content: space-between;
}

.app-bar h1 {
  font-size: 1.5em;
  margin: 0;
  display: inline-block;
  margin-right: 1em;
}

.task-form {
  display: flex;
  margin: 16px;
}

.task-form &gt; input {
  flex-grow: 1;
  box-sizing: border-box;
  padding: 10px 6px;
  background: transparent;
  border: 1px solid #aaa;
  width: 100%;
  font-size: 1em;
  margin-right: 16px;
}

.task-form &gt; input:focus {
  outline: 0;
}

.task-form &gt; button {
  min-width: 100px;
  height: 95%;
  background-color: #315481;
}

.tasks {
  list-style-type: none;
  padding-inline-start: 0;
  padding-left: 16px;
  padding-right: 16px;
  margin-block-start: 0;
  margin-block-end: 0;
}

.tasks &gt; li {
  display: flex;
  padding: 16px;
  border-bottom: #eee solid 1px;
}

.tasks &gt; li &gt; span {
  flex-grow: 1;
}

.tasks &gt; li &gt; button {
  justify-self: flex-end;
  background-color: #ff3046;
}
</code></pre>
<blockquote>
<p>å¦‚æœä½ æƒ³äº†è§£æ›´å¤šå…³äºè¿™ä¸ªæ ·å¼è¡¨çš„ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹è¿™ç¯‡å…³äº<a href="https://css-tricks.com/snippets/css/a-guide-to-flexbox/">Flexbox</a>çš„æ–‡ç« ï¼Œä»¥åŠ <a href="https://twitter.com/wesbos">Wes Bos</a> å…³äºå®ƒçš„å…è´¹<a href="https://flexbox.io/">è§†é¢‘æ•™ç¨‹</a>ã€‚</p>
<p>Flexboxæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ï¼Œå¯ä»¥åœ¨ä½ çš„ç”¨æˆ·ç•Œé¢ä¸­åˆ†é…å’Œå¯¹é½å…ƒç´ ã€‚</p>
</blockquote>
<h2 id="52-åº”ç”¨æ ·å¼">5.2 åº”ç”¨æ ·å¼</h2>
<p>ç°åœ¨ä½ éœ€è¦åœ¨ä½ çš„ç»„ä»¶å‘¨å›´æ·»åŠ ä¸€äº›å…ƒç´ ã€‚ä½ è¦åœ¨ <code>App</code>ä¸­çš„ä¸»<code>div</code>ä¸Šæ·»åŠ ä¸€ä¸ª <code>className</code>ï¼Œè¿˜è¦åœ¨ <code>h1</code>å‘¨å›´æ·»åŠ ä¸€ä¸ªå¸¦æœ‰å‡ ä¸ª <code>div</code>çš„ <code>header</code>å…ƒç´ ï¼Œå¹¶åœ¨è¡¨å•å’Œåˆ—è¡¨å‘¨å›´æ·»åŠ ä¸€ä¸ªä¸»<code>div</code>ã€‚çœ‹çœ‹ä¸‹é¢åº”è¯¥æ˜¯æ€æ ·æ·»åŠ çš„ï¼Œæ³¨æ„ç±»çš„åç§°ï¼Œå®ƒä»¬éœ€è¦ä¸CSSæ–‡ä»¶ä¸­çš„ç›¸åŒ:</p>
<p><strong>imports/ui/App.jsx</strong></p>
<pre><code>..
  return (
    &lt;div className=&quot;app&quot;&gt;
      &lt;header&gt;
        &lt;div className=&quot;app-bar&quot;&gt;
          &lt;div className=&quot;app-header&quot;&gt;
            &lt;h1&gt;Welcome to Meteor!&lt;/h1&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/header&gt;

      &lt;div className=&quot;main&quot;&gt;
        &lt;TaskForm /&gt;

        &lt;ul className=&quot;tasks&quot;&gt;
          {tasks.map(task =&gt; (
            &lt;Task
              key={task._id}
              task={task}
              onCheckboxClick={toggleChecked}
              onDeleteClick={deleteTask}
            /&gt;
          ))}
        &lt;/ul&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
</code></pre>
<blockquote>
<p>åœ¨Reactä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>className</code> è€Œä¸æ˜¯ <code>class</code>ï¼Œå› ä¸º Reactä½¿ç”¨ Javascript æ¥å®šä¹‰ç”¨æˆ·ç•Œé¢ï¼Œè€Œ <code>class</code>æ˜¯ Javascriptä¸­çš„ä¸€ä¸ªä¿ç•™è¯ã€‚</p>
</blockquote>
<p>å¦å¤–ï¼Œä¸ºä½ çš„appé€‰æ‹©ä¸€ä¸ªæ›´å¥½çš„æ ‡é¢˜ï¼ŒMeteorå¾ˆäº†ä¸èµ·ï¼Œä½†ä½ ä¸å¸Œæœ›åœ¨ä½ çš„åº”ç”¨ç¨‹åºé¡¶éƒ¨æ ä¸­ä¸€ç›´çœ‹åˆ° <code>Welcome to Meteor!</code>ã€‚</p>
<p>ä½ å¯ä»¥é€‰æ‹©ç±»ä¼¼ä¸‹é¢çš„å†…å®¹:</p>
<p><strong>imports/ui/App.jsx</strong></p>
<pre><code>..
  &lt;h1&gt;ğŸ“ï¸ To Do List&lt;/h1&gt;
..
</code></pre>
<p>ä½ çš„appåº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·:</p>
<center><img src="/image/step05-styles.png" width="20%" /></center>
<blockquote>
<p>å›é¡¾ï¼šä½ å¯ä»¥åœ¨<a href="https://github.com/meteor/react-tutorial/tree/master/src/simple-todos/step05">è¿™é‡Œ</a>æ£€æŸ¥ä½ çš„ä»£ç åœ¨è¿™ä¸€æ­¥éª¤ç»“æŸæ—¶åº”è¯¥æ˜¯æ€æ ·çš„</p>
</blockquote>
<p>åœ¨ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†ä½¿è¿™ä¸ªä»»åŠ¡åˆ—è¡¨æ›´å…·äº¤äº’æ€§ï¼Œä¾‹å¦‚ï¼Œæä¾›ä¸€ç§è¿‡æ»¤ä»»åŠ¡çš„æ–¹æ³•ã€‚</p>
<h1 id="6-ç­›é€‰ä»»åŠ¡">6 ç­›é€‰ä»»åŠ¡</h1>
<p>åœ¨è¿™ä¸€æ­¥ï¼Œä½ å°†æŒ‰çŠ¶æ€è¿‡æ»¤ä½ çš„ä»»åŠ¡ï¼Œå¹¶æ˜¾ç¤ºå¾…åŠä»»åŠ¡çš„æ•°é‡ã€‚</p>
<h2 id="61-usestate">6.1 useState</h2>
<p>é¦–å…ˆï¼Œä½ è¦æ·»åŠ ä¸€ä¸ªæŒ‰é’®æ¥æ˜¾ç¤ºæˆ–éšè—åˆ—è¡¨ä¸­çš„å·²å®Œæˆä»»åŠ¡ã€‚</p>
<p>æ¥è‡ª React çš„ <code>useState</code>å‡½æ•°æ˜¯ä¿æŒè¿™ä¸ªæŒ‰é’®çŠ¶æ€çš„æœ€å¥½æ–¹æ³•ã€‚å®ƒè¿”å›ä¸€ä¸ªæœ‰ä¸¤ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œå…¶ä¸­ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯çŠ¶æ€çš„å€¼ï¼Œç¬¬äºŒä¸ªæ˜¯ä¸€ä¸ªsetterå‡½æ•°ï¼Œæ˜¯ä½ è¦æ›´æ–°çŠ¶æ€çš„æ–¹å¼ã€‚ä½ å¯ä»¥ä½¿ç”¨æ•°ç»„ææ„æ¥è·å¾—è¿™ä¸¤é¡¹çš„è¿”å›ï¼Œå¹¶ä¸”å·²ç»ä¸ºå®ƒä»¬å£°æ˜äº†ä¸€ä¸ªå˜é‡ã€‚</p>
<p>è¯·è®°ä½ï¼Œç”¨äºå¸¸é‡çš„åå­—ä¸å±äºReact APIï¼Œä½ å¯ä»¥éšå¿ƒæ‰€æ¬²åœ°å‘½åå®ƒä»¬ã€‚</p>
<p>åŒæ—¶åœ¨ä»»åŠ¡è¡¨å•ä¸‹é¢æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼Œå®ƒå°†æ ¹æ®å½“å‰çŠ¶æ€æ˜¾ç¤ºä¸åŒçš„æ–‡æœ¬ã€‚</p>
<p><strong>imports/ui/App.jsx</strong></p>
<pre><code>import React, { useState } from 'react';
..
export const App = () =&gt; {
  const [hideCompleted, setHideCompleted] = useState(false);
 
  ..
    &lt;div className=&quot;main&quot;&gt;
      &lt;TaskForm /&gt;
       &lt;div className=&quot;filter&quot;&gt;
         &lt;button onClick={() =&gt; setHideCompleted(!hideCompleted)}&gt;
           {hideCompleted ? 'Show All' : 'Hide Completed'}
         &lt;/button&gt;
       &lt;/div&gt;
  ..
</code></pre>
<p>ä½ å¯ä»¥åœ¨<a href="https://reactjs.org/docs/hooks-state.html">è¿™é‡Œ</a>é˜…è¯»æ›´å¤šå…³äº <code>useState</code> hook çš„ä¿¡æ¯ã€‚</p>
<p>æˆ‘ä»¬å»ºè®®ä½ æŠŠé’©å­æ€»æ˜¯æ·»åŠ åœ¨ç»„ä»¶çš„é¡¶éƒ¨ï¼Œè¿™æ ·ä¼šæ›´å®¹æ˜“é¿å…ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚æ€»æ˜¯ä»¥ç›¸åŒçš„é¡ºåºè¿è¡Œå®ƒä»¬ã€‚</p>
<h2 id="62-æŒ‰é’®æ ·å¼">6.2 æŒ‰é’®æ ·å¼</h2>
<p>ä½ åº”è¯¥ç»™æŒ‰é’®æ·»åŠ ä¸€äº›æ ·å¼ï¼Œè¿™æ ·å®ƒå°±ä¸ä¼šæ˜¾å¾—ç°æš—å’Œæ²¡æœ‰è‰¯å¥½çš„å¯¹æ¯”åº¦ã€‚ä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ ·å¼ä½œä¸ºå‚è€ƒï¼š</p>
<p><strong>client/main.css</strong></p>
<pre><code>.filter {
  display: flex;
  justify-content: center;
}

.filter &gt; button {
  background-color: #62807e;
}
</code></pre>
<h2 id="63-è¿‡æ»¤ä»»åŠ¡">6.3 è¿‡æ»¤ä»»åŠ¡</h2>
<p>ç°åœ¨ï¼Œå¦‚æœç”¨æˆ·åªæƒ³çœ‹åˆ°å¾…å¤„ç†çš„ä»»åŠ¡ï¼Œä½ å¯ä»¥åœ¨ Mini Mongo æŸ¥è¯¢ä¸­ç»™ä½ çš„é€‰æ‹©å™¨æ·»åŠ ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œä½ éœ€è¦å¾—åˆ°æ‰€æœ‰ä¸æ˜¯ isChecked=true çš„ä»»åŠ¡ã€‚</p>
<p><strong>imports/ui/App.jsx</strong></p>
<pre><code>..
  const hideCompletedFilter = { isChecked: { $ne: true } };

  const tasks = useTracker(() =&gt;
    TasksCollection.find(hideCompleted ? hideCompletedFilter : {}, {
      sort: { createdAt: -1 },
    }).fetch()
  );
..
</code></pre>
<h2 id="64-meteorå¼€å‘å·¥å…·æ’ä»¶">6.4 Meteorå¼€å‘å·¥å…·æ’ä»¶</h2>
<p>ä½ å¯ä»¥å®‰è£…ä¸€ä¸ªæ‰©å±•æ¥å¯è§†åŒ–ä½ åœ¨ Mini Mongo ä¸­çš„æ•°æ®ã€‚</p>
<p>Meteor DevTools Evolved å°†å¸®åŠ©ä½ è°ƒè¯•ä½ çš„appï¼Œå› ä¸ºä½ å¯ä»¥çœ‹åˆ° Mini Mongo ä¸Šæœ‰å“ªäº›æ•°æ®ã€‚</p>
<center><img src="/image/step06-extension.png" width="100%" /></center>
<p>ä½ è¿˜å¯ä»¥çœ‹åˆ° Meteor ä»æœåŠ¡å™¨ä¸Šå‘é€å’Œæ¥æ”¶çš„æ‰€æœ‰ä¿¡æ¯ï¼Œè¿™å¯¹ä½ äº†è§£ Meteor çš„å·¥ä½œæ–¹å¼å¾ˆæœ‰å¸®åŠ©ã€‚</p>
<center><img src="/image/step06-ddp-messages.png" width="100%" /></center>
<p>ä½¿ç”¨<a href="https://chrome.google.com/webstore/detail/meteor-devtools-evolved/ibniinmoafhgbifjojidlagmggecmpgf">æ­¤é“¾æ¥</a>åœ¨ä½ çš„è°·æ­Œæµè§ˆå™¨ä¸­å®‰è£…å®ƒã€‚</p>
<h2 id="65-å¾…åŠä»»åŠ¡">6.5 å¾…åŠä»»åŠ¡</h2>
<p>æ›´æ–°Appç»„ä»¶ï¼Œä»¥ä¾¿åœ¨åº”ç”¨æ ä¸­æ˜¾ç¤ºå¾…åŠä»»åŠ¡çš„æ•°é‡ã€‚</p>
<p>å½“æ²¡æœ‰å¾…åŠä»»åŠ¡æ—¶ï¼Œä½ åº”è¯¥é¿å…åœ¨ä½ çš„åº”ç”¨æ ä¸­æ·»åŠ é›¶ã€‚</p>
<p><strong>imports/ui/App.jsx</strong></p>
<pre><code>..
  const pendingTasksCount = useTracker(() =&gt;
    TasksCollection.find(hideCompletedFilter).count()
  );

  const pendingTasksTitle = `${
    pendingTasksCount ? ` (${pendingTasksCount})` : ''
  }`;
..

    &lt;h1&gt;
      ğŸ“ï¸ To Do List
      {pendingTasksTitle}
    &lt;/h1&gt;
..
</code></pre>
<p>ä½ å¯ä»¥åœ¨åŒä¸€ä¸ª useTracker ä¸­è¿›è¡Œè¿™ä¸¤ç§æŸ¥æ‰¾ï¼Œç„¶åè¿”å›ä¸€ä¸ªå…·æœ‰è¿™ä¸¤ç§å±æ€§çš„å¯¹è±¡ï¼Œä½†æ˜¯ä¸ºäº†æœ‰ä¸€ä¸ªæ›´å®¹æ˜“ç†è§£çš„ä»£ç ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œåˆ›å»ºäº†ä¸¤ä¸ªä¸åŒçš„è·Ÿè¸ªå™¨ã€‚</p>
<p>ä½ çš„appåº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p>
<center><img src="/image/step06-all.png" width="20%" style="display: inline;" />
<img src="/image/step06-filtered.png" width="20%" style="display: inline;" /></center>
<blockquote>
<p>å›é¡¾ï¼šä½ å¯ä»¥åœ¨<a href="https://github.com/meteor/react-tutorial/tree/master/src/simple-todos/step06">è¿™é‡Œ</a>æ£€æŸ¥ä½ çš„ä»£ç åœ¨è¿™ä¸€æ­¥éª¤ç»“æŸæ—¶åº”è¯¥æ˜¯æ€æ ·çš„</p>
</blockquote>
<p>åœ¨ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†åœ¨ä½ çš„appä¸­åŒ…å«ç”¨æˆ·è®¿é—®ã€‚</p>
<h1 id="7-æ·»åŠ ç”¨æˆ·è´¦æˆ·">7 æ·»åŠ ç”¨æˆ·è´¦æˆ·</h1>
<h2 id="71-å¯†ç è®¤è¯">7.1 å¯†ç è®¤è¯</h2>
<p>Meteor å·²ç»é…å¤‡äº†ä¸€ä¸ªåŸºæœ¬çš„è®¤è¯å’Œè´¦æˆ·ç®¡ç†ç³»ç»Ÿï¼Œæ‰€ä»¥ä½ åªéœ€è¦æ·»åŠ  accounts-password æ¥å¯ç”¨ç”¨æˆ·åå’Œå¯†ç è®¤è¯ã€‚</p>
<pre><code>meteor add accounts-password
</code></pre>
<blockquote>
<p>æ”¯æŒçš„è®¤è¯æ–¹æ³•è¿˜æœ‰å¾ˆå¤šã€‚ä½ å¯ä»¥åœ¨<a href="https://docs.meteor.com/api/accounts.html">è¿™é‡Œ</a>é˜…è¯»æ›´å¤šå…³äºè´¦æˆ·ç³»ç»Ÿçš„ä¿¡æ¯ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬è¿˜å»ºè®®ä½ å®‰è£… <code>bcrypt</code> nodeæ¨¡å—ï¼Œå¦åˆ™ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªè­¦å‘Šï¼Œè¯´ä½ æ­£åœ¨ä½¿ç”¨å®ƒçš„çº¯ JavaScript å®ç°ã€‚</p>
<pre><code>meteor npm install --save bcrypt
</code></pre>
<blockquote>
<p>ä½ åº”è¯¥æ€»æ˜¯ä½¿ç”¨ <code>meteor npm</code>ï¼Œè€Œä¸æ˜¯åªä½¿ç”¨ <code>npm</code>ï¼Œæ‰€ä»¥ä½ æ€»æ˜¯ä½¿ç”¨ Meteor ç»‘å®šçš„ <code>npm</code> ç‰ˆæœ¬ï¼Œè¿™æœ‰åŠ©äºä½ é¿å…ç”±äºä¸åŒç‰ˆæœ¬çš„npmå®‰è£…ä¸åŒçš„æ¨¡å—è€Œäº§ç”Ÿçš„é—®é¢˜ã€‚</p>
</blockquote>
<h2 id="72-åˆ›å»ºç”¨æˆ·è´¦æˆ·">7.2 åˆ›å»ºç”¨æˆ·è´¦æˆ·</h2>
<p>ç°åœ¨ä½ å¯ä»¥ä¸ºæˆ‘ä»¬çš„appåˆ›å»ºä¸€ä¸ªé»˜è®¤ç”¨æˆ·ï¼Œä½¿ç”¨ <code>meteorite</code> ä½œä¸ºç”¨æˆ·åï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰åœ¨æ•°æ®åº“ä¸­æ‰¾åˆ°å®ƒï¼Œå°±åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·ã€‚</p>
<p><strong>server/main.js</strong></p>
<pre><code>import { Meteor } from 'meteor/meteor';
import { Accounts } from 'meteor/accounts-base';
import { TasksCollection } from '/imports/api/TasksCollection';

..

const SEED_USERNAME = 'meteorite';
const SEED_PASSWORD = 'password';

Meteor.startup(() =&gt; {
  if (!Accounts.findUserByUsername(SEED_USERNAME)) {
    Accounts.createUser({
      username: SEED_USERNAME,
      password: SEED_PASSWORD,
    });
  }
  ..
});
</code></pre>
<p>åœ¨ä½ çš„appç”¨æˆ·ç•Œé¢ä¸­ï¼Œä½ åº”è¯¥è¿˜æ²¡æœ‰çœ‹åˆ°ä»»ä½•å˜åŒ–ã€‚</p>
<h2 id="73-ç™»å½•è¡¨å•">7.3 ç™»å½•è¡¨å•</h2>
<p>ä½ éœ€è¦ä¸ºç”¨æˆ·æä¾›ä¸€ç§æ–¹æ³•æ¥è¾“å…¥å¯†é’¥å¹¶è¿›è¡Œè®¤è¯ï¼Œä¸ºæ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ªè¡¨å•ã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>useState</code> é’©å­å®ç°å®ƒã€‚åˆ›å»ºä¸€ä¸ªåä¸º <code>LoginForm.jsx</code> çš„æ–°æ–‡ä»¶å¹¶åœ¨å…¶ä¸­æ·»åŠ ä¸€ä¸ªè¡¨å•ã€‚ä½ åº”è¯¥ä½¿ç”¨ <code>Meteor.loginWithPassword(username, password);</code> æ¥ç”¨æ‰€æä¾›çš„è¾“å…¥æ¥éªŒè¯ä½ çš„ç”¨æˆ·ã€‚</p>
<p><strong>imports/ui/LoginForm.jsx</strong></p>
<pre><code>import { Meteor } from 'meteor/meteor';
import React, { useState } from 'react';

export const LoginForm = () =&gt; {
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');

  const submit = e =&gt; {
    e.preventDefault();

    Meteor.loginWithPassword(username, password);
  };

  return (
    &lt;form onSubmit={submit} className=&quot;login-form&quot;&gt;
      &lt;label htmlFor=&quot;username&quot;&gt;Username&lt;/label&gt;

      &lt;input
        type=&quot;text&quot;
        placeholder=&quot;Username&quot;
        name=&quot;username&quot;
        required
        onChange={e =&gt; setUsername(e.target.value)}
      /&gt;

      &lt;label htmlFor=&quot;password&quot;&gt;Password&lt;/label&gt;

      &lt;input
        type=&quot;password&quot;
        placeholder=&quot;Password&quot;
        name=&quot;password&quot;
        required
        onChange={e =&gt; setPassword(e.target.value)}
      /&gt;

      &lt;button type=&quot;submit&quot;&gt;Log In&lt;/button&gt;
    &lt;/form&gt;
  );
};
</code></pre>
<p>å¥½äº†ï¼Œç°åœ¨ä½ æœ‰äº†ä¸€ä¸ªè¡¨å•ï¼Œè®©æˆ‘ä»¬æ¥ä½¿ç”¨å®ƒã€‚</p>
<h2 id="74-è¦æ±‚è®¤è¯">7.4 è¦æ±‚è®¤è¯</h2>
<p>æˆ‘ä»¬çš„appåº”è¯¥åªå…è®¸è®¤è¯çš„ç”¨æˆ·è®¿é—®å…¶ä»»åŠ¡ç®¡ç†åŠŸèƒ½ã€‚</p>
<p>å½“æˆ‘ä»¬æ²¡æœ‰è®¤è¯çš„ç”¨æˆ·æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°è¿”å› <code>LoginForm</code> ç»„ä»¶ï¼Œå¦åˆ™æˆ‘ä»¬è¿”å›è¡¨å•ã€è¿‡æ»¤å™¨å’Œåˆ—è¡¨ç»„ä»¶ã€‚</p>
<p>ä½ åº”è¯¥é¦–å…ˆå°†3ä¸ªç»„ä»¶ï¼ˆè¡¨å•ã€è¿‡æ»¤å™¨å’Œåˆ—è¡¨ï¼‰åŒ…è£¹åœ¨ä¸€ä¸ª <code>&lt;Fragment&gt;</code> ä¸­ï¼ŒFragment æ˜¯ React ä¸­çš„ä¸€ä¸ªç‰¹æ®Šç»„ä»¶ï¼Œä½ å¯ä»¥ç”¨å®ƒå°†ç»„ä»¶ç»„åˆåœ¨ä¸€èµ·è€Œä¸å½±å“ä½ çš„æœ€ç»ˆDOMï¼Œè¿™æ„å‘³ç€ä¸å½±å“ä½ çš„UIï¼Œå› ä¸ºå®ƒä¸ä¼šåœ¨HTMLä¸­å¼•å…¥å…¶å®ƒå…ƒç´ ã€‚</p>
<blockquote>
<p>åœ¨<a href="https://reactjs.org/docs/fragments.html">è¿™é‡Œ</a>é˜…è¯»æ›´å¤šå…³äº Fragments çš„ä¿¡æ¯</p>
</blockquote>
<p>æ‰€ä»¥ä½ å¯ä»¥ä» <code>Meteor.user()</code> ä¸­è·å¾—ä½ çš„è®¤è¯ç”¨æˆ·æˆ–nullï¼Œä½ åº”è¯¥æŠŠå®ƒåŒ…åœ¨ <code>useTracker</code> é’©å­é‡Œï¼Œè¿™æ ·æ‰æ˜¯ååº”å¼çš„ã€‚ç„¶åä½ å¯ä»¥æ ¹æ®ç”¨æˆ·æ˜¯å¦åœ¨ä¼šè¯ä¸­ï¼Œè¿”å›å¸¦æœ‰ä»»åŠ¡å’Œå…¶ä»–å†…å®¹çš„ <code>Fragment</code> æˆ– <code>LoginForm</code>ã€‚</p>
<p><strong>imports/ui/App.jsx</strong></p>
<pre><code>import { Meteor } from 'meteor/meteor';
import React, { useState, Fragment } from 'react';
import { useTracker } from 'meteor/react-meteor-data';
import { TasksCollection } from '/imports/api/TasksCollection';
import { Task } from './Task';
import { TaskForm } from './TaskForm';
import { LoginForm } from './LoginForm';

..
export const App = () =&gt; {
  const user = useTracker(() =&gt; Meteor.user());
  
  ..
  return (
      ..
      &lt;div className=&quot;main&quot;&gt;
        {user ? (
          &lt;Fragment&gt;
            &lt;TaskForm /&gt;

            &lt;div className=&quot;filter&quot;&gt;
              &lt;button onClick={() =&gt; setHideCompleted(!hideCompleted)}&gt;
                {hideCompleted ? 'Show All' : 'Hide Completed'}
              &lt;/button&gt;
            &lt;/div&gt;

            &lt;ul className=&quot;tasks&quot;&gt;
              {tasks.map(task =&gt; (
                &lt;Task
                  key={task._id}
                  task={task}
                  onCheckboxClick={toggleChecked}
                  onDeleteClick={deleteTask}
                /&gt;
              ))}
            &lt;/ul&gt;
          &lt;/Fragment&gt;
        ) : (
          &lt;LoginForm /&gt;
        )}
      &lt;/div&gt;
..
</code></pre>
<h2 id="75-ç™»å½•è¡¨å•æ ·å¼">7.5 ç™»å½•è¡¨å•æ ·å¼</h2>
<p>å¥½äº†ï¼Œç°åœ¨è®©æˆ‘ä»¬æ¥è®¾è®¡ç™»å½•è¡¨å•ã€‚</p>
<p>æŠŠä½ çš„æ ‡ç­¾å’Œè¾“å…¥éƒ½åŒ…åœ¨ <code>DIV</code> é‡Œï¼Œè¿™æ ·ä¼šæ›´å®¹æ˜“ç”¨ CSS æ¥æ§åˆ¶å®ƒã€‚</p>
<p><strong>client/main.css</strong></p>
<pre><code>.login-form {
  display: flex;
  flex-direction: column;
  height: 100%;

  justify-content: center;
  align-items: center;
}

.login-form &gt; div {
  margin: 8px;
}

.login-form &gt; div &gt; label {
  font-weight: bold;
}

.login-form &gt; div  &gt; input {
  flex-grow: 1;
  box-sizing: border-box;
  padding: 10px 6px;
  background: transparent;
  border: 1px solid #aaa;
  width: 100%;
  font-size: 1em;
  margin-right: 16px;
  margin-top: 4px;
}

.login-form &gt; div &gt; input:focus {
  outline: 0;
}

.login-form &gt; div &gt; button {
  background-color: #62807e;
}
</code></pre>
<p>ç°åœ¨ä½ çš„ç™»å½•è¡¨å•åº”è¯¥æ˜¯é›†ä¸­çš„ã€æ¼‚äº®çš„äº†ã€‚</p>
<h2 id="76-æœåŠ¡å™¨å¯åŠ¨">7.6 æœåŠ¡å™¨å¯åŠ¨</h2>
<p>ä»ç°åœ¨èµ·ï¼Œæ¯ä¸ªä»»åŠ¡éƒ½åº”è¯¥æœ‰ä¸€ä¸ªæ‹¥æœ‰è€…ã€‚æ‰€ä»¥å»ä½ çš„æ•°æ®åº“ï¼Œå°±åƒä½ ä¹‹å‰å­¦çš„é‚£æ ·ï¼Œä»é‚£é‡Œåˆ é™¤æ‰€æœ‰çš„ä»»åŠ¡: <code>db.tasks.remove({})ã€‚</code></p>
<p>ä¿®æ”¹ä½ çš„ <code>server/main.js</code>ï¼Œç”¨ä½ çš„ <code>meteorite</code> ç”¨æˆ·ä½œä¸ºæ‰€æœ‰è€…æ·»åŠ ç§å­ä»»åŠ¡ã€‚</p>
<p>ç¡®ä¿åœ¨è¿™æ¬¡ä¿®æ”¹åé‡å¯æœåŠ¡å™¨ï¼Œè¿™æ · <code>Meteor.startup</code> éƒ¨åˆ†å°†å†æ¬¡è¿è¡Œã€‚è¿™å¯èƒ½ä¼šä»¥ä»»ä½•æ–¹å¼è‡ªåŠ¨å‘ç”Ÿï¼Œå› ä¸ºè¦åœ¨æœåŠ¡å™¨ç«¯ä»£ç ä¸­è¿›è¡Œä¿®æ”¹ã€‚</p>
<p><strong>server/main.js</strong></p>
<pre><code>import { Meteor } from 'meteor/meteor';
import { Accounts } from 'meteor/accounts-base';
import { TasksCollection } from '/imports/api/TasksCollection';

const insertTask = (taskText, user) =&gt;
  TasksCollection.insert({
    text: taskText,
    userId: user._id,
    createdAt: new Date(),
  });

const SEED_USERNAME = 'meteorite';
const SEED_PASSWORD = 'password';

Meteor.startup(() =&gt; {
  if (!Accounts.findUserByUsername(SEED_USERNAME)) {
    Accounts.createUser({
      username: SEED_USERNAME,
      password: SEED_PASSWORD,
    });
  }

  const user = Accounts.findUserByUsername(SEED_USERNAME);

  if (TasksCollection.find().count() === 0) {
    [
      'First Task',
      'Second Task',
      'Third Task',
      'Fourth Task',
      'Fifth Task',
      'Sixth Task',
      'Seventh Task',
    ].forEach(taskText =&gt; insertTask(taskText, user));
  }
});
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ä¸€ä¸ªæ–°çš„å­—æ®µï¼Œå«åš <code>userId</code>ï¼Œå€¼æ˜¯ç”¨æˆ·çš„ <code>_id</code> å­—æ®µï¼ŒåŒæ—¶ä¹Ÿè®¾ç½®äº† <code>credateAt</code> å­—æ®µã€‚</p>
<h2 id="77-ä»»åŠ¡æ‰€æœ‰è€…">7.7 ä»»åŠ¡æ‰€æœ‰è€…</h2>
<p>ç°åœ¨ä½ å¯ä»¥åœ¨ç”¨æˆ·ç•Œé¢ä¸­é€šè¿‡è®¤è¯çš„ç”¨æˆ·è¿‡æ»¤ä»»åŠ¡ã€‚å½“ä» Mini Mongo è·å–ä»»åŠ¡æ—¶ï¼Œä½¿ç”¨ç”¨æˆ·çš„ <code>_id</code> å°†å­—æ®µ <code>userId</code> æ·»åŠ åˆ°ä½ çš„ Mongo é€‰æ‹©å™¨ã€‚</p>
<p><strong>imports/ui/App.jsx</strong></p>
<pre><code>..
    const hideCompletedFilter = { isChecked: { $ne: true } };
  
    const userFilter = user ? { userId: user._id } : {};
  
    const pendingOnlyFilter = { ...hideCompletedFilter, ...userFilter };
  
    const tasks = useTracker(() =&gt; {
      if (!user) {
        return [];
      }
  
      return TasksCollection.find(
        hideCompleted ? pendingOnlyFilter : userFilter,
        {
          sort: { createdAt: -1 },
        }
      ).fetch();
    });
  
    const pendingTasksCount = useTracker(() =&gt; {
      if (!user) {
        return 0;
      }
  
      return TasksCollection.find(pendingOnlyFilter).count();
    });
..

    &lt;TaskForm user={user} /&gt;
..
</code></pre>
<p>åŒæ—¶æ›´æ–°æ’å…¥çš„è°ƒç”¨ï¼Œåœ¨ <code>TaskForm</code> ä¸­åŒ…æ‹¬ <code>userId</code> å­—æ®µã€‚ä½ åº”è¯¥æŠŠç”¨æˆ·ä» <code>App</code> ç»„ä»¶ä¸­ä¼ é€’åˆ° <code>TaskForm</code> ä¸­ã€‚</p>
<p><strong>imports/ui/TaskForm.jsx</strong></p>
<pre><code>..
export const TaskForm = ({ user }) =&gt; {
  const [text, setText] = useState('');

  const handleSubmit = e =&gt; {
    e.preventDefault();

    if (!text) return;

    TasksCollection.insert({
      text: text.trim(),
      createdAt: new Date(),
      userId: user._id
    });

    setText('');
  };
..
</code></pre>
<h2 id="78-é€€å‡ºç™»å½•">7.8 é€€å‡ºç™»å½•</h2>
<p>æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡åœ¨åº”ç”¨æ ä¸‹é¢æ˜¾ç¤ºæ‰€æœ‰è€…çš„ç”¨æˆ·åæ¥æ›´å¥½åœ°ç»„ç»‡æˆ‘ä»¬çš„ä»»åŠ¡ã€‚ä½ å¯ä»¥åœ¨æˆ‘ä»¬çš„ <code>Fragment</code> å¼€å§‹æ ‡ç­¾ä¹‹ååŠ å…¥ä¸€ä¸ªæ–°çš„ <code>div</code>ã€‚</p>
<p>åœ¨è¿™é‡Œä½ å¯ä»¥æ·»åŠ ä¸€ä¸ª <code>onClick</code> å¤„ç†ç¨‹åºæ¥æ³¨é”€ç”¨æˆ·ã€‚è¿™æ˜¯éå¸¸ç®€å•çš„ï¼Œåªè¦è°ƒç”¨ <code>Meteor.logout()</code> å°±å¯ä»¥äº†ã€‚</p>
<p><strong>imports/ui/App.jsx</strong></p>
<pre><code>..
  const logout = () =&gt; Meteor.logout();

  return (
..
    &lt;Fragment&gt;
      &lt;div className=&quot;user&quot; onClick={logout}&gt;
        {user.username} ğŸšª
      &lt;/div&gt;
..
</code></pre>
<p>è®°å¾—ä¹Ÿè¦ç»™ä½ çš„ç”¨æˆ·ååŠ ä¸Šæ ·å¼ã€‚</p>
<p><strong>client/main.css</strong></p>
<pre><code>.user {
  display: flex;

  align-self: flex-end;

  margin: 8px 16px 0;
  font-weight: bold;
}
</code></pre>
<p>å”·! åœ¨è¿™ä¸€æ­¥ï¼Œä½ å·²ç»åšäº†å¾ˆå¤šäº‹æƒ…ï¼šè®¤è¯äº†ç”¨æˆ·ï¼Œåœ¨ä»»åŠ¡ä¸­è®¾ç½®äº†ç”¨æˆ·ï¼Œå¹¶ä¸ºç”¨æˆ·æä¾›äº†ä¸€ç§æ³¨é”€æ–¹å¼ã€‚</p>
<p>ä½ çš„appåº”è¯¥çœ‹èµ·æ¥åƒè¿™æ ·:</p>
<center><img src="/image/step07-login.png" width="20%" style="display: inline;" />
<img src="/image/step07-logout.png" width="20%" style="display: inline;" /></center>
<blockquote>
<p>å›é¡¾ï¼šä½ å¯ä»¥åœ¨<a href="https://github.com/meteor/react-tutorial/tree/master/src/simple-todos/step07">è¿™é‡Œ</a>æ£€æŸ¥ä½ çš„ä»£ç åœ¨è¿™ä¸€æ­¥éª¤ç»“æŸæ—¶åº”è¯¥æ˜¯æ€æ ·çš„ã€‚</p>
</blockquote>
<p>åœ¨ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†å¼€å§‹ä½¿ç”¨æ–¹æ³•ï¼Œåªåœ¨æ£€æŸ¥ä¸€äº›æ¡ä»¶åæ”¹å˜æ•°æ®ã€‚</p>
<h1 id="8-æ–¹æ³•">8 æ–¹æ³•</h1>
<p>åœ¨è¿™ä¸€æ­¥ä¹‹å‰ï¼Œappçš„ä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥ç¼–è¾‘æ•°æ®åº“çš„ä»»ä½•éƒ¨åˆ†ï¼Œç›´æ¥åœ¨å®¢æˆ·ç«¯è¿›è¡Œæ›´æ”¹ã€‚è¿™å¯¹äºå¿«é€Ÿçš„åŸå‹è®¾è®¡æ¥è¯´å¯èƒ½ä¸é”™ï¼Œä½†çœŸæ­£çš„åº”ç”¨éœ€è¦æ§åˆ¶å¯¹å…¶æ•°æ®çš„è®¿é—®ã€‚</p>
<p>åœ¨ Meteor ä¸­ï¼Œå®‰å…¨åœ°åœ¨æœåŠ¡å™¨ä¸­è¿›è¡Œä¿®æ”¹çš„æœ€ç®€å•åŠæ³•æ˜¯å£°æ˜æ–¹æ³•ï¼Œè€Œä¸æ˜¯åœ¨å®¢æˆ·ç«¯ç›´æ¥è°ƒç”¨ <code>insert</code>ã€<code>update</code> æˆ– <code>remove</code>ã€‚</p>
<p>é€šè¿‡æ–¹æ³•ï¼Œä½ å¯ä»¥éªŒè¯ç”¨æˆ·æ˜¯å¦ç»è¿‡è®¤è¯ï¼Œæ˜¯å¦è¢«æˆæƒæ‰§è¡ŒæŸäº›æ“ä½œï¼Œç„¶åç›¸åº”åœ°æ”¹å˜æ•°æ®åº“ã€‚</p>
<p>Meteor æ–¹æ³•æ˜¯ä½¿ç”¨å‡½æ•° <code>Meteor.call</code> ä¸ä½ çš„æœåŠ¡å™¨é€šä¿¡çš„ä¸€ç§æ–¹å¼ï¼Œä½ éœ€è¦æä¾›ä½ çš„æ–¹æ³•çš„åç§°å’Œå‚æ•°ã€‚</p>
<blockquote>
<p>ä½ å¯ä»¥åœ¨<a href="https://guide.meteor.com/methods.html">è¿™é‡Œ</a>é˜…è¯»æ›´å¤šå…³äºæ–¹æ³•çš„ä¿¡æ¯ã€‚</p>
</blockquote>
<h2 id="81-ç¦ç”¨å¿«é€ŸåŸå‹æŠ€æœ¯">8.1 ç¦ç”¨å¿«é€ŸåŸå‹æŠ€æœ¯</h2>
<p>æ¯ä¸ªæ–°åˆ›å»ºçš„ Meteor é¡¹ç›®éƒ½é»˜è®¤å®‰è£…äº†ä¸å®‰å…¨çš„åŒ…ã€‚</p>
<p>è¿™ä¸ªåŒ…å…è®¸æˆ‘ä»¬ä»å®¢æˆ·ç«¯ç¼–è¾‘æ•°æ®åº“ï¼Œå°±åƒæˆ‘ä»¬ä¸Šé¢è¯´çš„ï¼Œè¿™å¯¹å¿«é€Ÿåˆ¶ä½œåŸå‹å¾ˆæœ‰ç”¨ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦åˆ é™¤å®ƒï¼Œå› ä¸ºé¡¾åæ€ä¹‰å®ƒæ˜¯ä¸å®‰å…¨çš„ã€‚</p>
<pre><code>meteor remove insecure
</code></pre>
<p>ç°åœ¨ä½ çš„appçš„æ”¹å˜ä¸å†èµ·ä½œç”¨äº†ï¼Œå› ä¸ºä½ å·²ç»æ’¤é”€äº†æ‰€æœ‰å®¢æˆ·ç«¯æ•°æ®åº“çš„æƒé™ã€‚ä¾‹å¦‚ï¼Œå°è¯•æ’å…¥ä¸€ä¸ªæ–°çš„ä»»åŠ¡ï¼Œä½ ä¼šçœ‹åˆ° <code>insert failed: Access denied</code> å‡ºç°åœ¨ä½ çš„æµè§ˆå™¨æ§åˆ¶å°ä¸­ã€‚</p>
<h2 id="82-æ·»åŠ ä»»åŠ¡æ–¹æ³•">8.2 æ·»åŠ ä»»åŠ¡æ–¹æ³•</h2>
<p>ç°åœ¨ä½ éœ€è¦å®šä¹‰æ–¹æ³•ã€‚</p>
<p>ä½ éœ€è¦ä¸ºæˆ‘ä»¬æƒ³åœ¨å®¢æˆ·ç«¯æ‰§è¡Œçš„æ¯ä¸ªæ•°æ®åº“æ“ä½œå®šä¹‰ä¸€ä¸ªæ–¹æ³•ã€‚</p>
<p>æ–¹æ³•åº”è¯¥è¢«å®šä¹‰åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¸Šæ‰§è¡Œçš„ä»£ç ä¸­ï¼Œä»¥æ”¯æŒä¼˜åŒ–çš„ç”¨æˆ·ç•Œé¢ã€‚</p>
<p><strong>ä¼˜åŒ–çš„ç”¨æˆ·ç•Œé¢</strong></p>
<p>å½“æˆ‘ä»¬ä½¿ç”¨ <code>Meteor.call</code> åœ¨å®¢æˆ·ç«¯è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œæœ‰ä¸¤ä»¶äº‹æ˜¯å¹¶è¡Œå‘ç”Ÿçš„ã€‚</p>
<ol>
<li>å®¢æˆ·ç«¯å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œä»¥ä¾¿åœ¨å®‰å…¨ç¯å¢ƒä¸‹è¿è¡Œè¯¥æ–¹æ³•ã€‚</li>
<li>è¯¥æ–¹æ³•çš„æ¨¡æ‹Ÿç›´æ¥åœ¨å®¢æˆ·ç«¯è¿è¡Œï¼Œè¯•å›¾é¢„æµ‹è°ƒç”¨çš„ç»“æœã€‚</li>
</ol>
<p>è¿™æ„å‘³ç€ï¼Œåœ¨æœåŠ¡å™¨è¿”å›ç»“æœä¹‹å‰ï¼Œä¸€ä¸ªæ–°åˆ›å»ºçš„ä»»åŠ¡å®é™…å‡ºç°åœ¨äº†å±å¹•ä¸Šã€‚</p>
<p>å¦‚æœç»“æœä¸æœåŠ¡å™¨çš„ç»“æœä¸€è‡´ï¼Œä¸€åˆ‡éƒ½ä¿æŒåŸæ ·ï¼Œå¦åˆ™ç”¨æˆ·ç•Œé¢ä¼šè¢«ä¿®æ”¹ä»¥åæ˜ æœåŠ¡å™¨çš„å®é™…çŠ¶æ€ã€‚</p>
<blockquote>
<p>Meteor ä¸ºä½ åšäº†æ‰€æœ‰è¿™äº›å·¥ä½œï¼Œä½ ä¸éœ€è¦æ‹…å¿ƒè¿™äº›ï¼Œä½†äº†è§£æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…å¾ˆé‡è¦ã€‚ä½ å¯ä»¥åœ¨<a href="https://blog.meteor.com/optimistic-ui-with-meteor-67b5a78c3fcf">è¿™é‡Œ</a>é˜…è¯»æ›´å¤šå…³äº Optimistic UI çš„å†…å®¹ã€‚</p>
</blockquote>
<p>ç°åœ¨ä½ åº”è¯¥åœ¨ä½ çš„ <code>imports/api</code> æ–‡ä»¶å¤¹ä¸­æ·»åŠ ä¸€ä¸ªåä¸º <code>tasksMethods</code> çš„æ–°æ–‡ä»¶ã€‚åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼Œå¯¹äºä½ åœ¨å®¢æˆ·ç«¯è¿›è¡Œçš„æ¯ä¸ªæ“ä½œï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†ä»å®¢æˆ·ç«¯è°ƒç”¨è¿™äº›æ–¹æ³•ï¼Œè€Œä¸æ˜¯ç›´æ¥ä½¿ç”¨ Mini Mongo æ“ä½œã€‚</p>
<p>åœ¨ Methods é‡Œé¢ï¼Œä½ æœ‰ä¸€äº›ç‰¹æ®Šçš„å±æ€§å‡†å¤‡åœ¨è¿™ä¸ªå¯¹è±¡ä¸Šä½¿ç”¨ï¼Œä¾‹å¦‚ï¼Œè®¤è¯ç”¨æˆ·çš„ <code>userId</code>ã€‚</p>
<p><strong>imports/api/tasksMethods.js</strong></p>
<pre><code>import { check } from 'meteor/check';
import { TasksCollection } from './TasksCollection';
 
Meteor.methods({
  'tasks.insert'(text) {
    check(text, String);
 
    if (!this.userId) {
      throw new Meteor.Error('Not authorized.');
    }
 
    TasksCollection.insert({
      text,
      createdAt: new Date,
      userId: this.userId,
    })
  },
 
  'tasks.remove'(taskId) {
    check(taskId, String);
 
    if (!this.userId) {
      throw new Meteor.Error('Not authorized.');
    }
 
    TasksCollection.remove(taskId);
  },
 
  'tasks.setIsChecked'(taskId, isChecked) {
    check(taskId, String);
    check(isChecked, Boolean);
 
    if (!this.userId) {
      throw new Meteor.Error('Not authorized.');
    }
 
    TasksCollection.update(taskId, {
      $set: {
        isChecked
      }
    });
  }
});
</code></pre>
<p>æ­£å¦‚ä½ åœ¨ä»£ç ä¸­æ‰€çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬ä¹Ÿåœ¨ä½¿ç”¨æ£€æŸ¥åŒ…æ¥ç¡®ä¿æˆ‘ä»¬æ”¶åˆ°äº†é¢„æœŸçš„è¾“å…¥ç±»å‹ï¼Œè¿™å¯¹äºç¡®ä¿ä½ ç¡®åˆ‡åœ°çŸ¥é“ä½ åœ¨æ•°æ®åº“ä¸­æ’å…¥æˆ–æ›´æ–°ä»€ä¹ˆæ˜¯å¾ˆé‡è¦çš„ã€‚</p>
<p>æœ€åä¸€éƒ¨åˆ†æ˜¯ç¡®ä¿ä½ çš„æœåŠ¡å™¨æ­£åœ¨æ³¨å†Œè¿™äº›æ–¹æ³•ï¼Œä½ å¯ä»¥åœ¨ <code>server/main.js</code> ä¸­å¯¼å…¥è¿™ä¸ªæ–‡ä»¶ï¼Œä»¥å¼ºåˆ¶è¯„ä¼°ã€‚</p>
<p><strong>server/main.js</strong></p>
<pre><code>import { Meteor } from 'meteor/meteor';
import { Accounts } from 'meteor/accounts-base';
import { TasksCollection } from '/imports/db/TasksCollection';
import '/imports/api/tasksMethods';
</code></pre>
<p>çœ‹ï¼Œä½ ä¸éœ€è¦ä»å¯¼å…¥ä¸­å¾—åˆ°ä»»ä½•å¯¹è±¡ï¼Œä½ åªéœ€è¦è¦æ±‚ä½ çš„æœåŠ¡å™¨å¯¼å…¥æ–‡ä»¶ï¼Œç„¶å <code>Meteor.methods</code> å°†è¢«è¯„ä¼°ï¼Œå¹¶åœ¨æœåŠ¡å™¨å¯åŠ¨æ—¶æ³¨å†Œä½ çš„æ–¹æ³•ã€‚</p>
<h2 id="83-å®ç°æ–¹æ³•è°ƒç”¨">8.3 å®ç°æ–¹æ³•è°ƒç”¨</h2>
<p>ç”±äºä½ å·²ç»å®šä¹‰äº†æ–¹æ³•ï¼Œä½ éœ€è¦å°†æ“ä½œé›†åˆçš„ä»£ç æ›¿æ¢æˆå®ƒä»¬ã€‚</p>
<p>åœ¨ <code>TaskForm</code> æ–‡ä»¶ä¸­ï¼Œä½ åº”è¯¥è°ƒç”¨ <code>Meteor.call('tasks.insert', text);</code> è€Œä¸æ˜¯ <code>TasksCollection.insert</code>ã€‚è®°ä½ï¼Œä¹Ÿè¦ä¿®æ­£ä½ å¯¼å…¥çš„æ–¹æ³•ã€‚</p>
<p><strong>imports/ui/TaskForm.jsx</strong></p>
<pre><code>import { Meteor } from 'meteor/meteor';
import React, { useState } from 'react';

export const TaskForm = () =&gt; {
  const [text, setText] = useState('');

  const handleSubmit = e =&gt; {
    e.preventDefault();

    if (!text) return;

    Meteor.call('tasks.insert', text);

    setText('');
  };
  ..
};
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä½ çš„ <code>TaskForm</code> ç»„ä»¶ä¸éœ€è¦å†æ¥æ”¶ç”¨æˆ·ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨æœåŠ¡å™¨ä¸­å¾—åˆ°äº† <code>userId</code>ã€‚</p>
<p>åœ¨ <code>App</code> æ–‡ä»¶ä¸­ï¼Œä½ åº”è¯¥è°ƒç”¨ <code>Meteor.call('tasks.setIsChecked', _id, !isChecked);</code> è€Œä¸æ˜¯ <code>TasksCollection.update</code>ï¼Œä»¥åŠ <code>Meteor.call('tasks.remove', _id)</code> è€Œä¸æ˜¯ <code>TasksCollection.remove</code>ã€‚</p>
<p>è®°ä½ä¹Ÿè¦ä»ä½ çš„ <code>&lt;TaskForm /&gt;</code> ä¸­åˆ é™¤ç”¨æˆ·å±æ€§ã€‚</p>
<p><strong>imports/ui/App.jsx</strong></p>
<pre><code>import { Meteor } from 'meteor/meteor';
import React, { useState, Fragment } from 'react';
import { useTracker } from 'meteor/react-meteor-data';
import { TasksCollection } from '/imports/db/TasksCollection';
import { Task } from './Task';
import { TaskForm } from './TaskForm';
import { LoginForm } from './LoginForm';

const toggleChecked = ({ _id, isChecked }) =&gt;
  Meteor.call('tasks.setIsChecked', _id, !isChecked);

const deleteTask = ({ _id }) =&gt; Meteor.call('tasks.remove', _id);
..

            &lt;TaskForm /&gt;
..
</code></pre>
<p>ç°åœ¨ä½ çš„è¾“å…¥å’ŒæŒ‰é’®å°†é‡æ–°å¼€å§‹å·¥ä½œã€‚ä½ è·å¾—äº†ä»€ä¹ˆï¼Ÿ</p>
<ol>
<li>å½“æˆ‘ä»¬å‘æ•°æ®åº“æ’å…¥ä»»åŠ¡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å®‰å…¨åœ°éªŒè¯ç”¨æˆ·æ˜¯ç»è¿‡è®¤è¯çš„ï¼›<code>createdAt</code> å­—æ®µæ˜¯æ­£ç¡®çš„ï¼›<code>userId</code> æ˜¯åˆæ³•çš„ã€‚</li>
<li>å¦‚æœæˆ‘ä»¬æ„¿æ„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»¥åçš„æ–¹æ³•ä¸­æ·»åŠ é¢å¤–çš„éªŒè¯é€»è¾‘ã€‚</li>
<li>æˆ‘ä»¬çš„å®¢æˆ·ç«¯ä»£ç ä¸æ•°æ®åº“é€»è¾‘æ›´åŠ éš”ç¦»ã€‚æ²¡æœ‰åœ¨äº‹ä»¶å¤„ç†ç¨‹åºä¸­å‘ç”Ÿå¤§é‡çš„å¤„ç†é€»è¾‘ï¼Œè€Œæ˜¯åœ¨ä»»ä½•åœ°æ–¹éƒ½æœ‰å¯è°ƒç”¨çš„æ–¹æ³•ã€‚</li>
</ol>
<h2 id="84-apiå’Œdbæ–‡ä»¶å¤¹">8.4 apiå’Œdbæ–‡ä»¶å¤¹</h2>
<p>æˆ‘ä»¬æƒ³åœ¨è¿™é‡ŒèŠ±ç‚¹æ—¶é—´æ€è€ƒä¸€ä¸‹ï¼Œé›†åˆæ–‡ä»¶æ‰€åœ¨çš„æ–‡ä»¶å¤¹æ˜¯apiï¼Œä½†APIåœ¨ä½ çš„é¡¹ç›®ä¸­æ„å‘³ç€æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´çš„é€šä¿¡å±‚ï¼Œä½†é›†åˆä¸å†æ‰§è¡Œè¿™ä¸ªè§’è‰²äº†ã€‚æ‰€ä»¥ä½ åº”è¯¥æŠŠä½ çš„ <code>TasksCollection</code> æ–‡ä»¶ç§»åˆ°ä¸€ä¸ªå«<code>db</code>çš„æ–°æ–‡ä»¶å¤¹é‡Œã€‚</p>
<p>è¿™ä¸ªæ”¹å˜ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†å»ºè®®ä¿æŒæˆ‘ä»¬çš„å‘½åä¸å®é™…æƒ…å†µä¸€è‡´ã€‚</p>
<p>è®°ä½è¦ä¿®å¤ä½ çš„å¯¼å…¥ï¼Œä½ æœ‰4ä¸ªå¯¼å…¥åˆ° <code>TasksCollection</code> çš„æ–‡ä»¶ï¼Œåœ¨ä»¥ä¸‹æ–‡ä»¶ä¸­:</p>
<ol>
<li><code>imports/api/tasksMethods.js</code></li>
<li><code>imports/ui/TaskForm.jsx</code></li>
<li><code>imports/ui/App.jsx</code></li>
<li><code>server/main.js</code></li>
</ol>
<p>å®ƒä»¬åº”è¯¥ä» <code>import { TasksCollection } from '/imports/api/TasksCollection';</code> æ”¹ä¸º <code>import { TasksCollection } from '/imports/db/TasksCollection';</code>ã€‚</p>
<p>ä½ çš„appçœ‹èµ·æ¥åº”è¯¥å’Œä»¥å‰ä¸€æ ·ï¼Œå› ä¸ºåœ¨è¿™ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬æ²¡æœ‰æ”¹å˜ä»»ä½•ç”¨æˆ·å¯è§çš„å†…å®¹ã€‚ä½ å¯ä»¥ä½¿ç”¨ <code>Meteor DevTools</code> æ¥æŸ¥çœ‹é€å¾€æœåŠ¡å™¨çš„ä¿¡æ¯å’Œè¿”å›çš„ç»“æœï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥åœ¨<code>DDP</code>æ ‡ç­¾é¡µä¸­æ‰¾åˆ°ã€‚</p>
<blockquote>
<p>DDP æ˜¯ Meteor é€šä¿¡å±‚èƒŒåçš„åè®®ï¼Œä½ å¯ä»¥åœ¨<a href="https://github.com/meteor/meteor/blob/devel/packages/ddp/DDP.md">è¿™é‡Œ</a>äº†è§£æ›´å¤šå…³äºå®ƒçš„ä¿¡æ¯ã€‚</p>
</blockquote>
<p>æˆ‘ä»¬å»ºè®®ä½ æ”¹å˜å¯¹é”™è¯¯ç±»å‹çš„æ£€æŸ¥è°ƒç”¨ï¼Œä»¥äº§ç”Ÿä¸€äº›é”™è¯¯ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ç†è§£åœ¨è¿™äº›æƒ…å†µä¸‹ä¼šå‘ç”Ÿä»€ä¹ˆã€‚</p>
<blockquote>
<p>å›é¡¾ï¼šä½ å¯ä»¥åœ¨<a href="https://github.com/meteor/react-tutorial/tree/master/src/simple-todos/step08">è¿™é‡Œ</a>æ£€æŸ¥ä½ çš„ä»£ç åœ¨è¿™ä¸€æ­¥éª¤ç»“æŸæ—¶åº”è¯¥æ˜¯æ€æ ·çš„ã€‚</p>
</blockquote>
<p>åœ¨ä¸‹ä¸€æ­¥ä¸­ï¼Œæˆ‘ä»¬å°†å¼€å§‹ä½¿ç”¨ <code>Publication</code>ï¼Œåªå‘å¸ƒæ¯ä¸ªæ¡ˆä¾‹ä¸­éœ€è¦çš„æ•°æ®ã€‚</p>
<h1 id="9-å‘å¸ƒ">9 å‘å¸ƒ</h1>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»æŠŠæ‰€æœ‰çš„appçš„æ•æ„Ÿä»£ç ç§»åˆ°äº†æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬éœ€è¦äº†è§£ Meteor çš„å¦ä¸€åŠæ¶‰åŠå®‰å…¨å†…å®¹ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬ä¸€ç›´å‡è®¾æ•´ä¸ªæ•°æ®åº“å­˜åœ¨äºå®¢æˆ·ç«¯ï¼Œè¿™æ„å‘³ç€å¦‚æœæˆ‘ä»¬è°ƒç”¨ <code>Tasks.find()</code>ï¼Œæˆ‘ä»¬å°†å¾—åˆ°é›†åˆä¸­çš„æ¯ä¸ªä»»åŠ¡ã€‚å¦‚æœæˆ‘ä»¬appçš„ç”¨æˆ·æƒ³è¦å­˜å‚¨éšç§æ•æ„Ÿçš„æ•°æ®ï¼Œè¿™å°±ä¸å¥½äº†ã€‚æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥æ§åˆ¶ Meteor å°†å“ªäº›æ•°æ®å‘é€åˆ°å®¢æˆ·ç«¯çš„æ•°æ®åº“ã€‚</p>
<h2 id="91-è‡ªåŠ¨å‘å¸ƒ">9.1 è‡ªåŠ¨å‘å¸ƒ</h2>
<p>å°±åƒä¸Šä¸€æ­¥ä¸­çš„ <code>insecure</code> ä¸€æ ·ï¼Œæ‰€æœ‰æ–°çš„ Meteor åº”ç”¨ç¨‹åºå¼€å§‹æ—¶éƒ½ä¼šè‡ªåŠ¨å‘å¸ƒåŒ…ï¼Œå®ƒä¼šè‡ªåŠ¨å°†æ‰€æœ‰æ•°æ®åº“å†…å®¹åŒæ­¥åˆ°å®¢æˆ·ç«¯ã€‚æ‰€ä»¥ä½ åº”è¯¥åˆ é™¤å®ƒ:</p>
<pre><code>meteor remove autopublish
</code></pre>
<p>å½“åº”ç”¨ç¨‹åºåˆ·æ–°æ—¶ï¼Œä»»åŠ¡åˆ—è¡¨å°†æ˜¯ç©ºçš„ã€‚å¦‚æœæ²¡æœ‰è‡ªåŠ¨å‘å¸ƒåŒ…ï¼Œæˆ‘ä»¬å°†ä¸å¾—ä¸æ˜ç¡®æŒ‡å®šæœåŠ¡å™¨å‘å®¢æˆ·ç«¯å‘é€çš„å†…å®¹ã€‚Meteor ä¸­å®ç°è¿™ä¸ªçš„å‡½æ•°æ˜¯ <code>Meteor.publish</code> å’Œ <code>Meteor.subscribe</code>ã€‚</p>
<ul>
<li><code>Meteor.publish</code>ï¼šå…è®¸å°†æ•°æ®ä»æœåŠ¡å™¨å‘å¸ƒåˆ°å®¢æˆ·ç«¯ã€‚</li>
<li><code>Meteor.subscribe</code>ï¼šå…è®¸å®¢æˆ·ç«¯çš„ä»£ç å‘å®¢æˆ·ç«¯ç´¢å–æ•°æ®ã€‚</li>
</ul>
<h2 id="92-ä»»åŠ¡å‘å¸ƒ">9.2 ä»»åŠ¡å‘å¸ƒ</h2>
<p>ä½ éœ€è¦é¦–å…ˆåœ¨ä½ çš„æœåŠ¡å™¨ä¸Šæ·»åŠ ä¸€ä¸ª <code>publication</code>ï¼Œè¿™ä¸ª <code>publication</code> åº”è¯¥å‘å¸ƒæ¥è‡ªè®¤è¯ç”¨æˆ·çš„æ‰€æœ‰ä»»åŠ¡ã€‚åœ¨æ–¹æ³•ä¸­ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨å‘å¸ƒåŠŸèƒ½ä¸­ä½¿ç”¨ <code>this.userId</code> æ¥è·å¾—è®¤è¯ç”¨æˆ·çš„èº«ä»½ã€‚</p>
<p>åœ¨ <code>api</code> æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªåä¸º <code>tasksPublications.js</code> çš„æ–°æ–‡ä»¶ã€‚</p>
<p><strong>imports/api/tasksPublications.js</strong></p>
<pre><code>import { Meteor } from 'meteor/meteor';
import { TasksCollection } from '/imports/db/TasksCollection';

Meteor.publish('tasks', function publishTasks() {
  return TasksCollection.find({ userId: this.userId });
});
</code></pre>
<p>ç”±äºä½ æ˜¯åœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ä½¿ç”¨çš„ï¼Œæ‰€ä»¥ä¸åº”è¯¥ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼ˆ=&gt;ï¼‰ï¼Œå› ä¸ºç®­å¤´å‡½æ•°ä¸æä¾›ä¸Šä¸‹æ–‡ã€‚ä½ éœ€è¦ä»¥ä¼ ç»Ÿçš„æ–¹å¼ï¼Œé€šè¿‡å‡½æ•°å…³é”®å­—ä½¿ç”¨è¿™ä¸ªå‡½æ•°ã€‚</p>
<p>æœ€åä¸€éƒ¨åˆ†æ˜¯ç¡®ä¿ä½ çš„æœåŠ¡å™¨æ³¨å†Œè¿™ä¸ª <code>publication</code>ã€‚ä½ å¯ä»¥è¿™æ ·åšï¼Œåœ¨ <code>server/main.js</code> ä¸­å¯¼å…¥è¿™ä¸ªæ–‡ä»¶ï¼Œä»¥å¼ºåˆ¶è¯„ä¼°ã€‚</p>
<p><strong>server/main.js</strong></p>
<pre><code>import { Meteor } from 'meteor/meteor';
import { Accounts } from 'meteor/accounts-base';
import { TasksCollection } from '/imports/db/TasksCollection';
import '/imports/api/tasksMethods';
import '/imports/api/tasksPublications';
</code></pre>
<h2 id="93-ä»»åŠ¡è®¢é˜…">9.3 ä»»åŠ¡è®¢é˜…</h2>
<p>ç„¶åæˆ‘ä»¬å¯ä»¥åœ¨å®¢æˆ·ç«¯è®¢é˜…è¯¥å‘å¸ƒã€‚</p>
<p>ç”±äºæˆ‘ä»¬æƒ³è¦æ¥æ”¶æ¥è‡ªè¯¥å‘å¸ƒçš„å˜åŒ–ï¼Œæˆ‘ä»¬å°†åœ¨ä¸€ä¸ª <code>useTracker</code> é’©å­ä¸­è®¢é˜…å®ƒã€‚</p>
<p>è¿™ä¹Ÿæ˜¯æˆ‘ä»¬é‡æ„ä»£ç çš„å¥½æ—¶æœºï¼Œä½¿ç”¨ä¸€ä¸ª <code>useTracker</code> ä» <code>TasksCollection</code> è·å–æ•°æ®ã€‚</p>
<p><strong>imports/ui/App.jsx</strong></p>
<pre><code>..
  const { tasks, pendingTasksCount, isLoading } = useTracker(() =&gt; {
    const noDataAvailable = { tasks: [], pendingTasksCount: 0 };
    if (!Meteor.user()) {
      return noDataAvailable;
    }
    const handler = Meteor.subscribe('tasks');

    if (!handler.ready()) {
      return { ...noDataAvailable, isLoading: true };
    }

    const tasks = TasksCollection.find(
      hideCompleted ? pendingOnlyFilter : userFilter,
      {
        sort: { createdAt: -1 },
      }
    ).fetch();
    const pendingTasksCount = TasksCollection.find(pendingOnlyFilter).count();

    return { tasks, pendingTasksCount };
  });
..
</code></pre>
<h2 id="94-åŠ è½½çŠ¶æ€">9.4 åŠ è½½çŠ¶æ€</h2>
<p>ä½ ä¹Ÿåº”è¯¥ä¸ºä½ çš„appæ·»åŠ ä¸€ä¸ªåŠ è½½çŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“è®¢é˜…æ•°æ®è¿˜æ²¡æœ‰å‡†å¤‡å¥½çš„æ—¶å€™ï¼Œä½ åº”è¯¥å‘ä½ çš„ç”¨æˆ·å‘ŠçŸ¥è¿™ä¸€ç‚¹ã€‚è¦å‘ç°è®¢é˜…æ˜¯å¦å‡†å¤‡å¥½äº†ï¼Œä½ åº”è¯¥å¾—åˆ°è®¢é˜…è°ƒç”¨çš„è¿”å›å€¼ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…å«è®¢é˜…çŠ¶æ€çš„å¯¹è±¡ï¼ŒåŒ…æ‹¬å°†è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼çš„readyå‡½æ•°ã€‚</p>
<p><strong>imports/ui/App.jsx</strong></p>
<pre><code>..
  &lt;div className=&quot;filter&quot;&gt;
    &lt;button onClick={() =&gt; setHideCompleted(!hideCompleted)}&gt;
        {hideCompleted ? 'Show All' : 'Hide Completed'}
    &lt;/button&gt;
  &lt;/div&gt;
  
  {isLoading &amp;&amp; &lt;div className=&quot;loading&quot;&gt;loading...&lt;/div&gt;}
  
  &lt;ul className=&quot;tasks&quot;&gt;
..
</code></pre>
<p>è®©æˆ‘ä»¬ä¹Ÿè°ƒæ•´ä¸€ä¸‹è¿™ç§åŠ è½½çš„æ ·å¼ã€‚</p>
<pre><code>.loading {
  display: flex;
  flex-direction: column;
  height: 100%;

  justify-content: center;
  align-items: center;

  font-weight: bold;
}
</code></pre>
<p>ä¸€æ—¦ä½ è¿™æ ·åšäº†ï¼Œæ‰€æœ‰çš„ä»»åŠ¡å°†é‡æ–°å‡ºç°ã€‚</p>
<p>åœ¨æœåŠ¡å™¨ä¸Šè°ƒç”¨ <code>Meteor.publish</code> ä¼šæ³¨å†Œä¸€ä¸ªåä¸º <code>tasks</code> çš„å‘å¸ƒã€‚å½“ <code>Meteor.subscribe</code> åœ¨å®¢æˆ·ç«¯è¢«è°ƒç”¨æ—¶ï¼Œå®¢æˆ·ç«¯å°±ä¼šè®¢é˜…è¯¥å‘å¸ƒçš„æ‰€æœ‰æ•°æ®ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ƒæ˜¯æ•°æ®åº“ä¸­çš„æ‰€æœ‰ä»»åŠ¡ï¼Œç”¨äºè®¤è¯ç”¨æˆ·ã€‚</p>
<h2 id="95-æ£€æŸ¥ç”¨æˆ·æƒé™">9.5 æ£€æŸ¥ç”¨æˆ·æƒé™</h2>
<p>åªæœ‰ä»»åŠ¡çš„æ‰€æœ‰è€…æ‰èƒ½æ”¹å˜æŸäº›å†…å®¹ã€‚ä½ åº”è¯¥æ”¹å˜ä½ çš„æ–¹æ³•ï¼Œä»¥æ£€æŸ¥è¢«éªŒè¯çš„ç”¨æˆ·æ˜¯å¦æ˜¯åˆ›å»ºä»»åŠ¡çš„åŒä¸€ä¸ªç”¨æˆ·ã€‚</p>
<p><strong>imports/api/tasksMethods.js</strong></p>
<pre><code>..
  'tasks.remove'(taskId) {
    check(taskId, String);

    if (!this.userId) {
      throw new Meteor.Error('Not authorized.');
    }

    const task = TasksCollection.findOne({ _id: taskId, userId: this.userId });

    if (!task) {
      throw new Meteor.Error('Access denied.');
    }

    TasksCollection.remove(taskId);
  },

  'tasks.setIsChecked'(taskId, isChecked) {
    check(taskId, String);
    check(isChecked, Boolean);

    if (!this.userId) {
      throw new Meteor.Error('Not authorized.');
    }

    const task = TasksCollection.findOne({ _id: taskId, userId: this.userId });

    if (!task) {
      throw new Meteor.Error('Access denied.');
    }

    TasksCollection.update(taskId, {
      $set: {
        isChecked,
      },
    });
  },
..
</code></pre>
<p>ä¸ºä»€ä¹ˆä¸åœ¨å®¢æˆ·ç«¯è¿”å›å…¶ä»–ç”¨æˆ·çš„ä»»åŠ¡å¾ˆé‡è¦å‘¢ï¼Ÿ</p>
<p>è¿™å¾ˆé‡è¦ï¼Œå› ä¸ºä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æ§åˆ¶å°è°ƒç”¨ Meteor æ–¹æ³•ã€‚ä½ å¯ä»¥ä½¿ç”¨ä½ çš„ DevTools æ§åˆ¶å°æ ‡ç­¾æ¥æµ‹è¯•ï¼Œç„¶åè¾“å…¥å¹¶ç‚¹å‡»å›è½¦ï¼š<code>Meteor.call('tasks.remove', 'xtPTsNECC3KPuMnDu');</code> ã€‚å¦‚æœä½ ä» remove æ–¹æ³•ä¸­ç§»é™¤éªŒè¯ï¼Œå¹¶ä»æ•°æ®åº“ä¸­ä¼ é€’ä¸€ä¸ªæœ‰æ•ˆçš„ä»»åŠ¡ <code>_id</code>ï¼Œä½ å°†èƒ½å¤Ÿç§»é™¤å®ƒã€‚</p>
<blockquote>
<p>å›é¡¾ï¼šä½ å¯ä»¥åœ¨<a href="https://github.com/meteor/react-tutorial/tree/master/src/simple-todos/step09">è¿™é‡Œ</a>æ£€æŸ¥ä½ çš„ä»£ç åœ¨è¿™ä¸€æ­¥éª¤ç»“æŸæ—¶åº”è¯¥æ˜¯æ€æ ·çš„ã€‚</p>
</blockquote>
<p>åœ¨ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†åœ¨ç§»åŠ¨ç¯å¢ƒä¸­ä»¥æœ¬åœ°åº”ç”¨ç¨‹åºçš„å½¢å¼è¿è¡Œè¯¥åº”ç”¨ç¨‹åºã€‚</p>
<h1 id="10-åœ¨ç§»åŠ¨ç«¯è¿è¡Œ">10 åœ¨ç§»åŠ¨ç«¯è¿è¡Œ</h1>
<p>ç›®å‰ï¼ŒWindows ä¸Šçš„ Meteor ä¸æ”¯æŒåœ¨ç§»åŠ¨ç«¯æ„å»ºã€‚å¦‚æœä½ åœ¨ Windows ä¸Šä½¿ç”¨ Meteorï¼Œä½ åº”è¯¥è·³è¿‡è¿™ä¸ªæ­¥éª¤ã€‚</p>
<p>åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬åªåœ¨ç½‘é¡µæµè§ˆå™¨ä¸­æ„å»ºæˆ‘ä»¬çš„appå¹¶è¿›è¡Œæµ‹è¯•ï¼Œä½† Meteor çš„è®¾è®¡æ˜¯ä¸ºäº†åœ¨ä¸åŒçš„å¹³å°ä¸Šå·¥ä½œ &ndash; ä½ çš„ç®€å•çš„todoåˆ—è¡¨ç½‘ç«™åªéœ€å‡ ä¸ªå‘½ä»¤å°±å¯ä»¥å˜æˆä¸€ä¸ª iOS æˆ– Android appã€‚</p>
<p>Meteor ä½¿å»ºç«‹ç§»åŠ¨åº”ç”¨æ‰€éœ€çš„æ‰€æœ‰å·¥å…·å˜å¾—ç®€å•ï¼Œä½†ä¸‹è½½æ‰€æœ‰ç¨‹åºå¯èƒ½éœ€è¦ä¸€æ®µæ—¶é—´ &ndash; å¯¹äºAndroidæ¥è¯´ï¼Œä¸‹è½½é‡çº¦ä¸º300MBï¼›å¯¹äºiOSæ¥è¯´ï¼Œä½ éœ€è¦å®‰è£…Xcodeï¼Œè¿™å¤§çº¦æ˜¯2GBã€‚å¦‚æœä½ ä¸æƒ³ç­‰å¾…ä¸‹è½½è¿™äº›å·¥å…·ï¼Œè¯·éšæ—¶è·³åˆ°ä¸‹ä¸€æ­¥ã€‚</p>
<blockquote>
<p>é‡è¦æç¤ºï¼šæ‰‹æœºçš„è®¾ç½®å’Œè®¾å®šæ˜¯éå¸¸åŠ¨æ€çš„ã€‚å¦‚æœä½ å‘ç°ä¸‹é¢çš„ä»»ä½•æ­¥éª¤æ²¡æœ‰æŒ‰ç…§è§„å®šå·¥ä½œï¼Œæˆ–è€…ä»»ä½•é“¾æ¥çš„æ–‡ä»¶ä¸æ˜¯æœ€æ–°çš„ï¼Œè¯·æ‰“å¼€ä¸€ä¸ªissueï¼Œæˆ‘ä»¬å°†æ›´æ–°å®ƒã€‚å¦‚æœä½ çŸ¥é“åº”è¯¥å¦‚ä½•æ”¹å˜ï¼Œä½ ä¹Ÿå¯ä»¥å¼€PRsã€‚</p>
</blockquote>
<h2 id="101-ios-æ¨¡æ‹Ÿå™¨">10.1 iOS æ¨¡æ‹Ÿå™¨</h2>
<p>å¦‚æœä½ æœ‰ä¸€å°Macï¼Œä½ å¯ä»¥åœ¨iOSæ¨¡æ‹Ÿå™¨å†…è¿è¡Œä½ çš„åº”ç”¨ç¨‹åºã€‚</p>
<p>æŒ‰ç…§è¿™ä¸ªæŒ‡å—æ¥å®‰è£…iOSçš„æ‰€æœ‰å¼€å‘å…ˆå†³æ¡ä»¶ã€‚</p>
<p>å½“ä½ å®Œæˆåï¼Œè¾“å…¥ï¼š</p>
<pre><code>meteor add-platform ios
meteor run ios
</code></pre>
<p>ä½ ä¼šçœ‹åˆ°iOSæ¨¡æ‹Ÿå™¨å¼¹å‡ºï¼Œé‡Œé¢è¿è¡Œç€ä½ çš„åº”ç”¨ç¨‹åºã€‚</p>
<center><img src="/image/step10-ios-simulator.png" width="20%" /></center>
<h2 id="102-å®‰å“æ¨¡æ‹Ÿå™¨">10.2 å®‰å“æ¨¡æ‹Ÿå™¨</h2>
<p>æŒ‰ç…§è¿™ä¸ªæŒ‡å—æ¥å®‰è£…å®‰å“çš„æ‰€æœ‰å¼€å‘å…ˆå†³æ¡ä»¶ã€‚</p>
<p>å½“ä½ å®Œæˆæ‰€æœ‰å®‰è£…åï¼Œè¾“å…¥:</p>
<pre><code>meteor add-platform android
</code></pre>
<p>åœ¨ä½ åŒæ„è®¸å¯æ¡æ¬¾åï¼Œè¾“å…¥:</p>
<pre><code>meteor run android
</code></pre>
<p>åœ¨ä¸€äº›åˆå§‹åŒ–ä¹‹åï¼Œä½ ä¼šçœ‹åˆ°ä¸€ä¸ªå®‰å“æ¨¡æ‹Ÿå™¨å¼¹å‡ºï¼Œåœ¨ä¸€ä¸ªæœ¬åœ°å®‰å“åŒ…è£…å†…è¿è¡Œä½ çš„åº”ç”¨ç¨‹åºã€‚è¯¥æ¨¡æ‹Ÿå™¨å¯èƒ½æœ‰ç‚¹æ…¢ï¼Œæ‰€ä»¥å¦‚æœä½ æƒ³çœ‹çœ‹ä½¿ç”¨ä½ çš„appçš„çœŸå®æƒ…å†µï¼Œä½ åº”è¯¥åœ¨å®é™…è®¾å¤‡ä¸Šè¿è¡Œå®ƒã€‚</p>
<center><img src="/image/step10-android-emulator.png" width="20%" /></center>
<h2 id="103-å®‰å“è®¾å¤‡">10.3 å®‰å“è®¾å¤‡</h2>
<p>é¦–å…ˆï¼Œå®Œæˆä¸Šè¿°æ‰€æœ‰æ­¥éª¤ï¼Œåœ¨ä½ çš„ç³»ç»Ÿä¸Šè®¾ç½®å®‰å“å·¥å…·ã€‚ç„¶åï¼Œç¡®ä¿ä½ åœ¨æ‰‹æœºä¸Šå¯ç”¨äº†USBè°ƒè¯•åŠŸèƒ½ï¼Œå¹¶ä¸”ç”¨USBçº¿å°†å…¶æ’å…¥ç”µè„‘ã€‚å¦å¤–ï¼Œåœ¨è®¾å¤‡ä¸Šè¿è¡Œä¹‹å‰ï¼Œä½ å¿…é¡»é€€å‡ºå®‰å“æ¨¡æ‹Ÿå™¨ã€‚</p>
<p>ç„¶åï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code>meteor run android-device
</code></pre>
<p>è¯¥appå°†è¢«æ„å»ºå¹¶å®‰è£…åœ¨ä½ çš„è®¾å¤‡ä¸Š</p>
<h2 id="104-iphone-or-ipad">10.4 iPhone or iPad</h2>
<blockquote>
<p>è¿™éœ€è¦ä¸€ä¸ªè‹¹æœå¼€å‘è€…è´¦å·ã€‚</p>
</blockquote>
<p>å¦‚æœä½ æœ‰ä¸€ä¸ªè‹¹æœå¼€å‘è€…è´¦å·ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨iOSè®¾å¤‡ä¸Šè¿è¡Œä½ çš„appã€‚è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</p>
<pre><code>meteor run ios-device
</code></pre>
<p>è¿™å°†ä¸ºä½ çš„iOSåº”ç”¨ç¨‹åºæ‰“å¼€Xcodeçš„é¡¹ç›®ã€‚ä½ å¯ä»¥ä½¿ç”¨Xcodeåœ¨ä»»ä½•è®¾å¤‡æˆ–Xcodeæ”¯æŒçš„æ¨¡æ‹Ÿå™¨ä¸Šå¯åŠ¨è¯¥åº”ç”¨ç¨‹åºã€‚</p>
<blockquote>
<p>å›é¡¾ï¼šä½ å¯ä»¥åœ¨<a href="https://github.com/meteor/react-tutorial/tree/master/src/simple-todos/step10">è¿™é‡Œ</a>æ£€æŸ¥ä½ çš„ä»£ç åœ¨è¿™ä¸€æ­¥éª¤ç»“æŸæ—¶åº”è¯¥æ˜¯æ€æ ·çš„ã€‚</p>
</blockquote>
<p>åœ¨ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†æ·»åŠ è‡ªåŠ¨æµ‹è¯•ã€‚</p>
<h1 id="11-æµ‹è¯•">11 æµ‹è¯•</h1>
<p>ç°åœ¨æˆ‘ä»¬å·²ç»ä¸ºappåˆ›å»ºäº†ä¸€äº›åŠŸèƒ½ï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæµ‹è¯•ï¼Œä»¥ç¡®ä¿æˆ‘ä»¬ä¸ä¼šå€’é€€å’Œä»¥æˆ‘ä»¬æœŸæœ›çš„æ–¹å¼å·¥ä½œã€‚</p>
<p>æˆ‘ä»¬å°†å†™ä¸€ä¸ªæµ‹è¯•ï¼Œæ‰§è¡Œä¸€ä¸ªæ–¹æ³•ï¼Œå¹¶éªŒè¯å®ƒæ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</p>
<h2 id="111-å®‰è£…ä¾èµ–">11.1 å®‰è£…ä¾èµ–</h2>
<p>æˆ‘ä»¬å°†ä¸º Mocha JavaScript æµ‹è¯•æ¡†æ¶æ·»åŠ ä¸€ä¸ªæµ‹è¯•é©±åŠ¨ï¼Œä»¥åŠä¸€ä¸ªæµ‹è¯•æ–­è¨€åº“ã€‚</p>
<pre><code>meteor add meteortesting:mocha
meteor npm install --save-dev chai
</code></pre>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥åœ¨&quot;æµ‹è¯•æ¨¡å¼&quot;ä¸‹è¿è¡Œæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œæ–¹æ³•æ˜¯è¿è¡Œ <code>meteor test</code> å¹¶æŒ‡å®šä¸€ä¸ªæµ‹è¯•é©±åŠ¨åŒ…ï¼ˆä½ éœ€è¦åœæ­¢å¸¸è§„åº”ç”¨ç¨‹åºçš„è¿è¡Œï¼Œæˆ–è€…ç”¨ <code>-port XYZ</code> æŒ‡å®šä¸€ä¸ªå¤‡ç”¨ç«¯å£ï¼‰ã€‚</p>
<pre><code>TEST_WATCH=1 meteor test --driver-package meteortesting:mocha
</code></pre>
<p>å®ƒåº”è¯¥è¾“å‡ºç±»ä¼¼è¿™æ ·çš„å†…å®¹:</p>
<pre><code>simple-todos-react
  âœ“ package.json has correct name
  âœ“ server is not client

2 passing (10ms)
</code></pre>
<p>è¿™ä¸¤ä¸ªæµ‹è¯•æ˜¯ä»å“ªé‡Œæ¥çš„ï¼Ÿæ¯ä¸€ä¸ªæ–°çš„ Meteor åº”ç”¨ç¨‹åºéƒ½åŒ…æ‹¬ä¸€ä¸ª <code>test/main.js</code> æ¨¡å—ï¼Œå…¶ä¸­åŒ…å«äº†å‡ ä¸ªä½¿ç”¨æè¿°ã€æ–­è¨€é£æ ¼çš„æµ‹è¯•ä¾‹å­ï¼Œè¿™äº›é£æ ¼åœ¨ Mocha ç­‰æµ‹è¯•æ¡†æ¶ä¸­å¾ˆæµè¡Œã€‚</p>
<blockquote>
<p>Meteor Mocha çš„é›†æˆæ˜¯ç”±ç¤¾åŒºç»´æŠ¤çš„ï¼Œä½ å¯ä»¥åœ¨<a href="https://github.com/meteortesting/meteor-mocha">è¿™é‡Œ</a>é˜…è¯»æ›´å¤šä¿¡æ¯ã€‚</p>
</blockquote>
<p>å½“ä½ ç”¨è¿™äº›é€‰é¡¹è¿è¡Œæ—¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨æµè§ˆå™¨ä¸­çš„åº”ç”¨ç¨‹åºURLä¸­çœ‹åˆ°æµ‹è¯•çš„ç»“æœ:</p>
<center><img src="/image/step11-test-report.png" width="100%" /></center>
<h2 id="112-è„šæ‰‹æ¶æµ‹è¯•">11.2 è„šæ‰‹æ¶æµ‹è¯•</h2>
<p>ç„¶è€Œï¼Œå¦‚æœä½ å¸Œæœ›å°†ä½ çš„æµ‹è¯•åˆ†æˆå¤šä¸ªæ¨¡å—ï¼Œä½ ä¹Ÿå¯ä»¥è¿™æ ·åšï¼šæ·»åŠ ä¸€ä¸ªæ–°çš„æµ‹è¯•æ¨¡å—ï¼Œåä¸º <code>imports/api/tasksMethods.test.js</code>ã€‚</p>
<p><strong>imports/api/tasksMethods.tests.js</strong></p>
<pre><code>import { Meteor } from 'meteor/meteor';

if (Meteor.isServer) {
  describe('Tasks', () =&gt; {
    describe('methods', () =&gt; {
      it('can delete owned task', () =&gt; {});
    });
  });
}
</code></pre>
<p>å¹¶åœ¨ <code>test/main.js</code> ä¸­å¯¼å…¥å®ƒï¼Œæ¯”å¦‚å¯¼å…¥ <code>'/imports/api/tasksMethods.test.js';</code> å¹¶åˆ é™¤è¯¥æ–‡ä»¶ä¸­çš„å…¶ä»–æ‰€æœ‰å†…å®¹ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦è¿™äº›æµ‹è¯•ã€‚</p>
<p><strong>tests/main.js</strong></p>
<pre><code>import '/imports/api/tasksMethods.tests.js';
</code></pre>
<h2 id="113-æ•°æ®å‡†å¤‡">11.3 æ•°æ®å‡†å¤‡</h2>
<p>åœ¨ä»»ä½•æµ‹è¯•ä¸­ï¼Œä½ éœ€è¦ç¡®ä¿æ•°æ®åº“åœ¨å¼€å§‹ä¹‹å‰å¤„äºæˆ‘ä»¬æœŸæœ›çš„çŠ¶æ€ã€‚ä½ å¯ä»¥ä½¿ç”¨ Mocha çš„ <code>beforeEach</code> ç»“æ„æ¥è½»æ¾åšåˆ°è¿™ä¸€ç‚¹ã€‚</p>
<p><strong>imports/api/tasksMethods.tests.js</strong></p>
<pre><code>import { Meteor } from 'meteor/meteor';
import { Random } from 'meteor/random';
import { TasksCollection } from '/imports/db/TasksCollection';

if (Meteor.isServer) {
  describe('Tasks', () =&gt; {
    describe('methods', () =&gt; {
      const userId = Random.id();
      let taskId;

      beforeEach(() =&gt; {
        TasksCollection.remove({});
        taskId = TasksCollection.insert({
          text: 'Test Task',
          createdAt: new Date(),
          userId,
        });
      });
    });
  });
}
</code></pre>
<p>åœ¨è¿™é‡Œï¼Œä½ æ­£åœ¨åˆ›å»ºä¸€ä¸ªå•ä¸€çš„ä»»åŠ¡ï¼Œå®ƒä¸ä¸€ä¸ªéšæœºçš„ userId ç›¸å…³è”ï¼Œè¿™ä¸ª userId åœ¨æ¯æ¬¡æµ‹è¯•è¿è¡Œä¸­éƒ½ä¼šä¸åŒã€‚</p>
<h2 id="114-æµ‹è¯•ä»»åŠ¡åˆ é™¤">11.4 æµ‹è¯•ä»»åŠ¡åˆ é™¤</h2>
<p>ç°åœ¨ä½ å¯ä»¥ç¼–å†™æµ‹è¯•ï¼Œä»¥è¯¥ç”¨æˆ·çš„èº«ä»½è°ƒç”¨ <code>tasks.remove</code> æ–¹æ³•ï¼Œå¹¶éªŒè¯ä»»åŠ¡æ˜¯å¦è¢«åˆ é™¤ï¼Œå› ä¸ºä½ è¦æµ‹è¯•ä¸€ä¸ªæ–¹æ³•å¹¶æ¨¡æ‹Ÿè®¤è¯çš„ç”¨æˆ·ã€‚ä½ å¯ä»¥å®‰è£…è¿™ä¸ªå®ç”¨ç¨‹åºåŒ…ï¼Œä½¿ä½ çš„ç”Ÿæ´»æ›´è½»æ¾ï¼š</p>
<pre><code>meteor add quave:testing
</code></pre>
<p><strong>imports/api/tasks.tests.js</strong></p>
<pre><code>import { Meteor } from 'meteor/meteor';
import { Random } from 'meteor/random';
import { mockMethodCall } from 'meteor/quave:testing';
import { assert } from 'chai';
import { TasksCollection } from '/imports/db/TasksCollection';
import '/imports/api/tasksMethods';

if (Meteor.isServer) {
  describe('Tasks', () =&gt; {
    describe('methods', () =&gt; {
      const userId = Random.id();
      let taskId;

      beforeEach(() =&gt; {
        TasksCollection.remove({});
        taskId = TasksCollection.insert({
          text: 'Test Task',
          createdAt: new Date(),
          userId,
        });
      });

      it('can delete owned task', () =&gt; {
        mockMethodCall('tasks.remove', taskId, { context: { userId } });

        assert.equal(TasksCollection.find().count(), 0);
      });
    });
  });
}
</code></pre>
<p>è®°å¾—ä» <code>chai</code> å¯¼å…¥ <code>assert</code> (import { assert } from &lsquo;chai&rsquo;;)</p>
<h2 id="115-æ›´å¤šçš„æµ‹è¯•">11.5 æ›´å¤šçš„æµ‹è¯•</h2>
<p>ä½ å¯ä»¥æ·»åŠ ä½ æƒ³è¦çš„æµ‹è¯•ã€‚ä¸‹é¢çš„ä»£ç æä¾›äº†ä¸€äº›å…¶ä»–çš„æµ‹è¯•ï¼Œå¯ä»¥å¸®åŠ©ä½ æ›´å¤šçš„äº†è§£æµ‹è¯•ä»€ä¹ˆåŠå¦‚ä½•æµ‹è¯•ï¼š</p>
<p><strong>imports/api/tasks.tests.js</strong></p>
<pre><code>import { Meteor } from 'meteor/meteor';
import { Random } from 'meteor/random';
import { mockMethodCall } from 'meteor/quave:testing';
import { assert } from 'chai';
import { TasksCollection } from '/imports/db/TasksCollection';
import '/imports/api/tasksMethods';

if (Meteor.isServer) {
  describe('Tasks', () =&gt; {
    describe('methods', () =&gt; {
      const userId = Random.id();
      let taskId;

      beforeEach(() =&gt; {
        TasksCollection.remove({});
        taskId = TasksCollection.insert({
          text: 'Test Task',
          createdAt: new Date(),
          userId,
        });
      });

      it('can delete owned task', () =&gt; {
        mockMethodCall('tasks.remove', taskId, { context: { userId } });

        assert.equal(TasksCollection.find().count(), 0);
      });

      it(`can't delete task without an user authenticated`, () =&gt; {
        const fn = () =&gt; mockMethodCall('tasks.remove', taskId);
        assert.throw(fn, /Not authorized/);
        assert.equal(TasksCollection.find().count(), 1);
      });

      it(`can't delete task from another owner`, () =&gt; {
        const fn = () =&gt;
          mockMethodCall('tasks.remove', taskId, {
            context: { userId: 'somebody-else-id' },
          });
        assert.throw(fn, /Access denied/);
        assert.equal(TasksCollection.find().count(), 1);
      });

      it('can change the status of a task', () =&gt; {
        const originalTask = TasksCollection.findOne(taskId);
        mockMethodCall('tasks.setIsChecked', taskId, !originalTask.isChecked, {
          context: { userId },
        });

        const updatedTask = TasksCollection.findOne(taskId);
        assert.notEqual(updatedTask.isChecked, originalTask.isChecked);
      });

      it('can insert new tasks', () =&gt; {
        const text = 'New Task';
        mockMethodCall('tasks.insert', text, {
          context: { userId },
        });

        const tasks = TasksCollection.find({}).fetch();
        assert.equal(tasks.length, 2);
        assert.isTrue(tasks.some(task =&gt; task.text === text));
      });
    });
  });
}
</code></pre>
<p>å¦‚æœä½ å†æ¬¡è¿è¡Œæµ‹è¯•å‘½ä»¤æˆ–ä¹‹å‰è®©å®ƒåœ¨è§‚å¯Ÿæ¨¡å¼ä¸‹è¿è¡Œï¼Œä½ åº”è¯¥çœ‹åˆ°ä»¥ä¸‹è¾“å‡º:</p>
<pre><code>Tasks
  methods
    âœ“ can delete owned task
    âœ“ can't delete task without an user authenticated
    âœ“ can't delete task from another owner
    âœ“ can change the status of a task
    âœ“ can insert new tasks

5 passing (70ms)
</code></pre>
<p>ä¸ºäº†æ–¹ä¾¿è¾“å…¥æµ‹è¯•å‘½ä»¤ï¼Œä½ å¯èƒ½æƒ³åœ¨package.jsonæ–‡ä»¶çš„scriptséƒ¨åˆ†æ·»åŠ ä¸€ä¸ªé€Ÿè®°ã€‚</p>
<p>äº‹å®ä¸Šï¼Œæ–°çš„Meteoråº”ç”¨ç¨‹åºå¸¦æœ‰ä¸€äº›é¢„å…ˆé…ç½®å¥½çš„npmè„šæœ¬ï¼Œæ¬¢è¿ä½ ä½¿ç”¨æˆ–ä¿®æ”¹å®ƒä»¬ã€‚</p>
<p>æ ‡å‡†çš„meteor npm testå‘½ä»¤è¿è¡Œä»¥ä¸‹å‘½ä»¤:</p>
<pre><code>meteor test --once --driver-package meteortesting:mocha
</code></pre>
<p>è¿™ä¸ªå‘½ä»¤é€‚åˆåœ¨æŒç»­é›†æˆï¼ˆCIï¼‰ç¯å¢ƒä¸­è¿è¡Œï¼Œå¦‚ Travis CI æˆ– CircleCIï¼Œå› ä¸ºå®ƒåªè¿è¡Œä½ çš„æœåŠ¡å™¨ç«¯æµ‹è¯•ã€‚å¦‚æœæ‰€æœ‰çš„æµ‹è¯•éƒ½é€šè¿‡äº†ï¼Œåˆ™ä»¥0é€€å‡ºã€‚</p>
<p>å¦‚æœä½ æƒ³åœ¨å¼€å‘åº”ç”¨ç¨‹åºæ—¶è¿è¡Œæµ‹è¯•ï¼ˆå¹¶åœ¨å¼€å‘æœåŠ¡å™¨é‡æ–°å¯åŠ¨æ—¶é‡æ–°è¿è¡Œï¼‰ï¼Œè€ƒè™‘ä½¿ç”¨ <code>meteor npm run test-app</code>ï¼Œè¿™ç›¸å½“äº:</p>
<pre><code>TEST_WATCH=1 meteor test --full-app --driver-package meteortesting:mocha
</code></pre>
<p>è¿™å’Œå‰é¢çš„å‘½ä»¤å‡ ä¹ä¸€æ ·ï¼Œåªæ˜¯å®ƒä¹Ÿä¼šæ­£å¸¸åŠ è½½ä½ çš„åº”ç”¨ç¨‹åºä»£ç ï¼ˆç”±äº<code>--full-app</code>ï¼‰ï¼Œå…è®¸ä½ åœ¨æµè§ˆå™¨ä¸­ä¸ä½ çš„åº”ç”¨ç¨‹åºäº¤äº’ï¼ŒåŒæ—¶è¿è¡Œå®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨æµ‹è¯•ã€‚</p>
<p>ä½ å¯ä»¥ç”¨ Meteor æµ‹è¯•åšæ›´å¤šçš„äº‹æƒ…! ä½ å¯ä»¥åœ¨ Meteor æŒ‡å—å…³äºæµ‹è¯•çš„æ–‡ç« ä¸­é˜…è¯»æ›´å¤šå†…å®¹ã€‚</p>
<blockquote>
<p>å›é¡¾ï¼šä½ å¯ä»¥åœ¨<a href="https://github.com/meteor/react-tutorial/tree/master/src/simple-todos/step11">è¿™é‡Œ</a>æ£€æŸ¥ä½ çš„ä»£ç åœ¨è¿™ä¸€æ­¥éª¤ç»“æŸæ—¶åº”è¯¥æ˜¯æ€æ ·çš„ã€‚</p>
</blockquote>
<p>åœ¨ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†æŠŠä½ çš„åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ° Galaxyï¼Œè¿™æ˜¯ Meteor åº”ç”¨ç¨‹åºçš„æœ€ä½³æ‰˜ç®¡ï¼Œç”± Meteor èƒŒåçš„åŒä¸€ä¸ªå›¢é˜Ÿå¼€å‘ã€‚</p>
<h1 id="12-éƒ¨ç½²">12 éƒ¨ç½²</h1>
<p>ç°åœ¨ä½ çš„åº”ç”¨å·²ç»æµ‹è¯•å®Œæ¯•ï¼Œå‡†å¤‡å‘å¸ƒï¼Œä»¥ä¾¿ä»»ä½•äººéƒ½å¯ä»¥ä½¿ç”¨å®ƒã€‚</p>
<p>è¿è¡Œä½ çš„ Meteor åº”ç”¨ç¨‹åºçš„æœ€å¥½åœ°æ–¹æ˜¯ Galaxyã€‚Galaxy æä¾›å…è´¹çš„éƒ¨ç½²ã€‚å¾ˆé…·ï¼Œå¯¹å—ï¼Ÿ</p>
<p>å¦‚æœä½ åœ¨è¿™ä¸€æ­¥æœ‰ä»»ä½•é—®é¢˜ï¼Œåº”è¯¥ç»™ Galaxy æ”¯æŒéƒ¨é—¨å‘é‚®ä»¶ï¼Œä»–ä»¬ä¼šå¸®åŠ©ä½ ã€‚æŠŠä½ çš„ä¿¡æ¯å‘åˆ° <code>support@meteor.com</code>ï¼Œå°½é‡è¯¦ç»†è§£é‡Šé—®é¢˜æ˜¯ä»€ä¹ˆï¼Œä½ å°†ä¼šå°½å¿«å¾—åˆ°å¸®åŠ©ã€‚åŒæ—¶ç¡®ä¿åœ¨ä¸»é¢˜ä¸­åŒ…æ‹¬ <code>React Tutorial</code>ï¼Œè¿™æ ·å¯¹æ–¹å°±çŸ¥é“ä½ æ˜¯ä»å“ªé‡Œæ¥çš„äº†ã€‚</p>
<h2 id="121-åˆ›å»ºè´¦å·">12.1 åˆ›å»ºè´¦å·</h2>
<p>ä½ æœ‰ä¸€ä¸ª Meteor Cloud è´¦å·å—ï¼Ÿæ²¡æœ‰å—ï¼Ÿå¥½å§ï¼Œè®©æˆ‘ä»¬æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>
<p>è¿›å…¥<a href="https://cloud.meteor.com/?isSignUp=true">cloud.meteor.com</a>ï¼Œä½ å°†ä¼šçœ‹åˆ°ä¸€ä¸ªåƒè¿™æ ·çš„è¡¨å•ï¼š</p>
<center><img src="/image/step12-sign-up.png" width="100%" /></center>
<p>åœ¨GitHubä¸Šæ³¨å†Œï¼Œç„¶åä»é‚£é‡Œå¼€å§‹ã€‚å®ƒåªè¦æ±‚ä½ æä¾›ç”¨æˆ·åå’Œå¯†ç ï¼Œä½ å°†éœ€è¦è¿™äº›æ¥éƒ¨ç½²ä½ çš„åº”ç”¨ç¨‹åºã€‚</p>
<p>å®Œæˆåï¼Œä½ çš„è´¦æˆ·å°±åˆ›å»ºå¥½äº†ã€‚ä½ å¯ä»¥ç”¨è¿™ä¸ªè´¦æˆ·è®¿é—® <a href="https://atmospherejs.com/">atmospherejs.com</a>ã€è®ºå›å’Œæ›´å¤šçš„å†…å®¹ï¼ŒåŒ…æ‹¬ Galaxy çš„å…è´¹éƒ¨ç½²ã€‚</p>
<h2 id="122-éƒ¨ç½²åº”ç”¨">12.2 éƒ¨ç½²åº”ç”¨</h2>
<p>ç°åœ¨ä½ å·²ç»å‡†å¤‡å¥½éƒ¨ç½²äº†ï¼Œç¡®ä¿åœ¨éƒ¨ç½²å‰è¿è¡Œ <code>meteor npm install</code>ï¼Œä»¥ç¡®ä¿æ‰€æœ‰çš„ä¾èµ–é¡¹éƒ½å·²å®‰è£…ã€‚</p>
<p>ä½ è¿˜éœ€è¦é€‰æ‹©ä¸€ä¸ªå­åŸŸåæ¥å‘å¸ƒä½ çš„åº”ç”¨ç¨‹åºã€‚æˆ‘ä»¬å°†ä½¿ç”¨ä¸»åŸŸå <code>meteorapp.com</code>ï¼Œè¿™æ˜¯å…è´¹çš„ï¼ŒåŒ…å«åœ¨ä»»ä½• Galaxy è®¡åˆ’ä¸­ã€‚</p>
<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ <code>react-tutorial.meteorapp.com</code>ï¼Œä½†è¯·ç¡®ä¿ä½ é€‰æ‹©äº†ä¸åŒçš„ï¼Œå¦åˆ™ä½ å°†æ”¶åˆ°ä¸€æ¡é”™è¯¯ä¿¡æ¯ï¼Œè¯´å®ƒå·²ç»è¢«ä½¿ç”¨äº†ã€‚</p>
<blockquote>
<p>ä½ å¯ä»¥åœ¨<a href="https://cloud-guide.meteor.com/custom-domains.html">è¿™é‡Œ</a>å­¦ä¹ å¦‚ä½•åœ¨ Galaxy ä¸Šä½¿ç”¨è‡ªå®šä¹‰åŸŸåã€‚è‡ªå®šä¹‰åŸŸåä» Essentials è®¡åˆ’å¼€å§‹å¯ç”¨ã€‚</p>
</blockquote>
<p>è¿è¡Œéƒ¨ç½²å‘½ä»¤ï¼š</p>
<pre><code>meteor deploy react-tutorial.meteorapp.com --free --mongo
</code></pre>
<p>ç¡®ä¿ä½ ç”¨ä¸€ä¸ªæƒ³ä½œä¸ºå­åŸŸåçš„è‡ªå®šä¹‰åç§°æ¥æ›¿æ¢ <code>react-tutorial</code>ã€‚</p>
<p>ä½ å°†ä¼šçœ‹åˆ°ä¸€ä¸ªç±»ä¼¼è¿™æ ·çš„æ—¥å¿—:</p>
<pre><code>meteor deploy react-tutorial.meteorapp.com --free --mongo
Talking to Galaxy servers at https://us-east-1.galaxy-deploy.meteor.com
Preparing to build your app...                
Preparing to upload your app... 
Uploaded app bundle for new app at react-tutorial.meteorapp.com.
Galaxy is building the app into a native image.
Waiting for deployment updates from Galaxy... 
Building app image...                         
Deploying app...                              
You have successfully deployed the first version of your app.

*** Your MongoDB shared instance database URI will be here as well ***

For details, visit https://galaxy.meteor.com/app/react-tutorial.meteorapp.com
</code></pre>
<p>è¿™ä¸ªè¿‡ç¨‹é€šå¸¸éœ€è¦5åˆ†é’Ÿå·¦å³ï¼Œä½†è¿™å–å†³äºä½ çš„ç½‘é€Ÿï¼Œå› ä¸ºå®ƒè¦æŠŠåº”ç”¨ç¨‹åºåŒ…å‘é€åˆ° Galaxy æœåŠ¡å™¨ã€‚</p>
<blockquote>
<p>Galaxy æ„å»ºäº†ä¸€ä¸ªæ–°çš„ Docker é•œåƒï¼Œå…¶ä¸­åŒ…å«äº†ä½ çš„åº”ç”¨åŒ…ï¼Œç„¶åç”¨å®ƒæ¥éƒ¨ç½²å®¹å™¨ï¼Œé˜…è¯»<a href="https://cloud-guide.meteor.com/container-environment.html">æ›´å¤š</a>ã€‚</p>
</blockquote>
<p>ä½ å¯ä»¥åœ¨ Galaxy ä¸ŠæŸ¥çœ‹æ—¥å¿—ï¼ŒåŒ…æ‹¬ Galaxy æ­£åœ¨æ„å»ºçš„ Docker é•œåƒå’Œéƒ¨ç½²çš„éƒ¨åˆ†ã€‚</p>
<h2 id="123-è®¿é—®å¹¶äº«å—å§">12.3 è®¿é—®å¹¶äº«å—å§</h2>
<p>ç°åœ¨ä½ åº”è¯¥èƒ½å¤Ÿè®¿é—®ä½ çš„ Galaxy ä»ªè¡¨æ¿ï¼Œç½‘å€æ˜¯ <a href="https://galaxy.meteor.com/app/react-tutorial.meteorapp.com">https://galaxy.meteor.com/app/react-tutorial.meteorapp.com</a> ï¼ˆç”¨ä½ çš„å­åŸŸæ›¿æ¢ <code>react-tutorial</code>ï¼‰ã€‚</p>
<p>å½“ç„¶ï¼Œä¹Ÿèƒ½å¤Ÿåœ¨ä½ é€‰æ‹©çš„åŸŸä¸­è®¿é—®å’Œä½¿ç”¨ä½ çš„åº”ç”¨ç¨‹åºï¼Œåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯ <code>react-tutorial.meteorapp.com</code>ã€‚ç¥è´ºä½ !</p>
<blockquote>
<p>æˆ‘ä»¬éƒ¨ç½²äº†åœ¨ç¾å›½è¿è¡Œçš„ Galaxy ç³»ç»Ÿï¼ˆus-east-1ï¼‰ï¼Œæˆ‘ä»¬ä¹Ÿæœ‰åœ¨ä¸–ç•Œå…¶ä»–åœ°åŒºè¿è¡Œçš„ Galaxy ç³»ç»Ÿï¼Œè¯·æŸ¥çœ‹<a href="https://cloud-guide.meteor.com/deploy-region.html">è¿™é‡Œ</a>çš„åˆ—è¡¨ã€‚</p>
</blockquote>
<p>è¿™å¾ˆäº†ä¸èµ·ï¼Œä½ çš„ Meteor åº”ç”¨ç¨‹åºè¿è¡Œåœ¨ Galaxy ä¸Šï¼Œå‡†å¤‡å¥½è¢«ä¸–ç•Œä¸Šçš„ä»»ä½•äººä½¿ç”¨å§ï¼</p>
<blockquote>
<p>å›é¡¾ï¼šä½ å¯ä»¥åœ¨<a href="https://github.com/meteor/react-tutorial/tree/master/src/simple-todos/step12">è¿™é‡Œ</a>æ£€æŸ¥ä½ çš„ä»£ç åœ¨è¿™ä¸€æ­¥éª¤ç»“æŸæ—¶åº”è¯¥æ˜¯æ€æ ·çš„ã€‚</p>
</blockquote>
<p>åœ¨ä¸‹ä¸€æ­¥ï¼Œæˆ‘ä»¬å°†ä¸ºä½ æä¾›ä¸€äº›ç»§ç»­å¼€å‘ä½ çš„åº”ç”¨ç¨‹åºçš„æƒ³æ³•ï¼Œä»¥åŠæ¥ä¸‹æ¥è¦çœ‹åˆ°çš„æ›´å¤šå†…å®¹ã€‚</p>
<h1 id="13-åç»­">13 åç»­</h1>
<p>ç¥è´ºä½ æ–°å»ºç«‹äº† Meteor åº”ç”¨ç¨‹åºï¼Œå®ƒæ­£åœ¨ Galaxy ä¸Šè¿è¡Œ! å“‡ï¼</p>
<p>ä½ çš„åº”ç”¨ç¨‹åºç›®å‰æ”¯æŒä¸ºè®¤è¯çš„ç”¨æˆ·æ·»åŠ ç§äººä»»åŠ¡ã€‚</p>
<p>å¯¹æ–°åŠŸèƒ½çš„æƒ³æ³•:</p>
<ul>
<li>å°†å·²å®Œæˆçš„ä»»åŠ¡æ ·å¼åŒ–ï¼Œä½¿å…¶çŠ¶æ€æ›´åŠ æ˜æ˜¾</li>
<li>åœ¨ç™»å½•è¡¨å•ä¸­ä¹Ÿæ·»åŠ åˆ›å»ºæ–°ç”¨æˆ·çš„é€‰é¡¹</li>
<li>ä¸ä»–äººåˆ†äº«ä»»åŠ¡</li>
</ul>
<p>åœ¨ Galaxy ä¸Šè¦åšçš„äº‹æƒ…:</p>
<ul>
<li>åœ¨ Galaxy ä¸Šæ£€æŸ¥ä½ çš„æ—¥å¿—ï¼Œçœ‹<a href="https://www.youtube.com/watch?v=WPYyHeWM21Q">è¿™é‡Œ</a>æˆ–è¯»<a href="https://cloud-guide.meteor.com/logs.html">è¿™é‡Œ</a></li>
<li>è®¾ç½®ä½ çš„å…è´¹SSLè¯ä¹¦ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ä½¿ç”¨<code>https</code>äº†ï¼Œé˜…è¯»<a href="https://cloud-guide.meteor.com/encryption.html">è¿™é‡Œ</a></li>
<li>è®¾ç½®ä½ çš„é€šçŸ¥ï¼Œé˜…è¯»<a href="https://cloud-guide.meteor.com/notifications.html">è¿™é‡Œ</a></li>
<li>æ ¹æ®éœ€æ±‚è‡ªåŠ¨æ‰©å±•ä½ çš„åº”ç”¨ç¨‹åºï¼Œè§‚çœ‹<a href="https://www.youtube.com/watch?v=rwLoviLzG6s">è¿™é‡Œ</a>æˆ–é˜…è¯»<a href="https://cloud-guide.meteor.com/triggers.html">è¿™é‡Œ</a></li>
<li>åœ¨APMä¸Šè¿›è¡Œä¸“ä¸šæ“ä½œå¹¶è§‚å¯Ÿä½ çš„æŒ‡æ ‡ï¼Œé˜…è¯»<a href="https://cloud-guide.meteor.com/apm-getting-started.html">è¿™é‡Œ</a></li>
<li>æŸ¥çœ‹æ‰€æœ‰çš„ Galaxy æŒ‡å—ï¼Œäº†è§£<a href="https://cloud-guide.meteor.com/">æ›´å¤š</a></li>
</ul>
<p>è¿™é‡Œæœ‰ä¸€äº›å…³äºä½ ä¸‹ä¸€æ­¥å¯ä»¥å»å“ªé‡Œçš„é€‰æ‹©ï¼š</p>
<ul>
<li>é˜…è¯»<a href="https://guide.meteor.com/">MeteoræŒ‡å—</a>ï¼Œäº†è§£æœ€ä½³å®è·µå’Œæœ‰ç”¨çš„ç¤¾åŒºåŒ…</li>
<li>æŸ¥é˜…<a href="https://docs.meteor.com/">å®Œæ•´çš„æ–‡æ¡£</a></li>
</ul>

    </div>

    

    


    <div class="container-prevnext">
    <div><a href="https://geekinney.com/post/meteor-guide/">â† Meteor æŒ‡å—</a></div>
    <div><a href="https://geekinney.com/post/my-view-of-reading/">å…³äºé˜…è¯»  â†’</a></div>
</div>
</div>

        </div>
        <div id="footer"><div class="container-footer">
    
    <a href="" target="_blank">
        
        <span class="some">enter your icp or a interesting slogan...<span>
        
    </a>
    <a id="s" href="/secrets">&nbsp;</a>
</div></div>
    </body>
</html>
